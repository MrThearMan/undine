description: Integrations Undine has with other libraries.

# Integrations

In this section, we'll cover the integrations to other libraries that
Undine includes.

## channels

```
pip install undine[channels]
```

Undine provides support for [GraphQL over WebSocket]{:target="_blank"} and
[GraphQL over SSE]{:target="_blank"} ([Single Connection mode](subscriptions.md#single-connection-mode))
by integrating with the [channels]{:target="_blank"} library. Using the channels integration
requires turning on Undine's [Async Support](async.md).

[channels]: https://github.com/django/channels
[GraphQL over WebSocket]: https://github.com/graphql/graphql-over-http/blob/main/rfcs/GraphQLOverWebSocket.md
[GraphQL over SSE]: https://github.com/graphql/graphql-over-http/blob/main/rfcs/GraphQLOverSSE.md

You'll need to configure Django in your project's `asgi.py` file
so that requests are sent to Undine's channels consumers.
There are three app wrappers available depending on which protocols you need.

For WebSocket support only:

```python
-8<- "integrations/channels.py"
```

For SSE Single Connection mode only:

```python
-8<- "integrations/channels_sse.py"
```

For both WebSocket and SSE Single Connection mode:

```python
-8<- "integrations/channels_websocket_and_sse.py"
```

## GraphiQL

Undine includes a built-in [GraphiQL]{:target="_blank"} interface for exploring and
testing your GraphQL API. You can enable it using the
[`GRAPHIQL_ENABLED`](settings.md#graphiql_enabled) setting. You should also set
[`ALLOW_INTROSPECTION_QUERIES`](settings.md#allow_introspection_queries) to `True`
so that GraphiQL can introspect the schema. GraphiQL is then accessible by navigating
to the GraphQL endpoint in a browser.

[GraphiQL]: https://github.com/graphql/graphiql

GraphiQL includes the explorer and history plugins. The URL encodes the current
document, variables, and headers, so it can be shared with others.

By default, [subscriptions](subscriptions.md) use [WebSockets](subscriptions.md#websockets).
To use [Server-Sent Events](subscriptions.md#server-sent-events) instead, use the
[`GRAPHIQL_SSE_ENABLED`](settings.md#graphiql_sse_enabled) setting.
[Single connection mode](subscriptions.md#single-connection-mode) can be enabled with the
[`GRAPHIQL_SSE_SINGLE_CONNECTION`](settings.md#graphiql_sse_single_connection) setting.

## django-debug-toolbar

```
pip install undine[debug]
```

Undine integrates with [django-debug-toolbar]{:target="_blank"}
by modifying the toolbar HTML so that it integrates with [GraphiQL](#graphiql).
After [installing django-debug-toolbar], Undine should automatically
patch it without any additional configuration.

[django-debug-toolbar]: https://github.com/django-commons/django-debug-toolbar
[installing django-debug-toolbar]: https://django-debug-toolbar.readthedocs.io/en/stable/installation.html

## django-modeltranslation

Undine integrates with [django-modeltranslation]{:target="_blank"}
by allowing you to modify how autogenerated `Fields`, `Inputs`, `Filters`
and `Orders` are created. Specifically, this happens using two settings:
[`MODELTRANSLATION_INCLUDE_TRANSLATABLE`](settings.md#modeltranslation_include_translatable)
and [`MODELTRANSLATION_INCLUDE_TRANSLATIONS`](settings.md#modeltranslation_include_translations).

[django-modeltranslation]: https://github.com/deschler/django-modeltranslation

Let's say you the following Model (with `MODELTRANSLATION_LANGUAGES = ("en", "fi")`)

```python
-8<- "integrations/model_translation_models.py"
```

...and the following translation options

```python
-8<- "integrations/model_translation_translation.py"
```

Based on the Model's translation options, `django-modeltranslation` adds additional fields
for each language defined by the `MODELTRANSLATION_LANGUAGES` setting. Let's call the added fields
the _"translatable"_ fields, and the fields they are based on the _"translation"_ fields.

Using the `MODELTRANSLATION_INCLUDE_TRANSLATABLE` and `MODELTRANSLATION_INCLUDE_TRANSLATIONS`
settings, you can control which of these fields undine will add to your schema
when using autogeneration. By default, only the _translation_ fields are added.
You can of course always add the translatable fields manually.

> Note that due to the way that `django-modeltranslation` works,
> the translation fields are always nullable, even for the default language.

## pytest

Undine comes with a pytest plugin that includes a testing client and few fixtures
to help you write tests for your GraphQL APIs.

The `GraphQLClient` class is wrapper around [Django's test client]{:target="_blank"} that
makes testing your GraphQL API easier. It can be added to a test using
the `graphql` fixture. Here is a simple example:

[Django's test client]: https://docs.djangoproject.com/en/stable/topics/testing/tools/#the-test-client

```python
-8<- "integrations/graphql_test_client.py"
```

GraphQL requests can be made by calling the client as shown above.
This makes a request to the GraphQL endpoint set by the
[`GRAPHQL_PATH`](settings.md#graphql_path) setting.

GraphQL variables can be passed using the `variables` argument. If these variables
include any files, the client will automatically create a GraphQL multipart request
instead of a normal GraphQL request.

```python
-8<- "integrations/graphql_test_client_variables.py"
```

The client returns a custom response object `GraphQLClientResponse`,
which has a number of useful properties for introspecting the response.
The response object also has details on the database queries that were executed
during the request, which can be useful for debugging the performance of your
GraphQL API.

```python
-8<- "integrations/graphql_test_client_response.py"
```

An async version of the client is also available, which can be accessed from
the `graphql_async` fixture.

```python
-8<- "integrations/graphql_test_client_async.py"
```

The plugin also includes a `undine_settings` fixture that allows modifying
Undine's settings during testing more easily.

```python
-8<- "integrations/undine_settings_fixture.py"
```

If the [channels](#channels) integration is installed, the test client can
also send GraphQL over WebSocket requests using the `over_websocket` method.

```python
-8<- "integrations/graphql_test_client_over_websocket.py"
```
