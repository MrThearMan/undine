<!DOCTYPE html>

<html class="writer-html5" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="../img/favicon.ico" rel="shortcut icon"/>
<title>Mutations - Undine</title>
<link href="../css/theme.css" rel="stylesheet"/>
<link href="../css/theme_extra.css" rel="stylesheet"/>
<link href="../css/docs.css" rel="stylesheet"/>
<link href="../css/pygments.css" rel="stylesheet"/>
<script>
        // Current page data
        var mkdocs_page_name = "Mutations";
        var mkdocs_page_input_path = "mutations.md";
        var mkdocs_page_url = null;
      </script>
<!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
<meta content="Documentation on mutations in Undine." name="description"/></head>
<body class="wy-body-for-nav" role="document">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side stickynav" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href=".."> Undine
        </a><div role="search">
<form action="../search.html" class="wy-form" id="rtd-search-form" method="get">
<input aria-label="Search docs" name="q" placeholder="Search docs" title="Type search term here" type="text"/>
</form>
</div>
</div>
<div aria-label="Navigation menu" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<ul>
<li class="toctree-l1"><a class="reference internal" href="..">Home</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/">Getting Started</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/">Tutorial</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../schema/">Schema</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../queries/">Queries</a>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal current" href="#">Mutations</a>
<ul class="current">
<li class="toctree-l2"><a class="reference internal" href="#mutationtypes">MutationTypes</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#mutation-kind">Mutation kind</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#auto-generation">Auto-generation</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#output-type">Output type</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#permissions">Permissions</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#validation">Validation</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#after-mutation-handling">After mutation handling</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#custom-mutations">Custom mutations</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#related-mutations">Related mutations</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#related-mutation-action">Related mutation action</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#order-of-operations">Order of operations</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#schema-name">Schema name</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#description">Description</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#directives">Directives</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#visibility">Visibility</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#graphql-extensions">GraphQL extensions</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#inputs">Inputs</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#model-field-references">Model field references</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#function-references">Function references</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#model-references">Model references</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#permissions_1">Permissions</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#validation_1">Validation</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#conversion">Conversion</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#default-values">Default values</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#input-only-inputs">Input-only inputs</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hidden-inputs">Hidden inputs</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#required-inputs">Required inputs</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#field-name">Field name</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#schema-name_1">Schema name</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#descriptions">Descriptions</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#deprecation-reason">Deprecation reason</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#directives_1">Directives</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#visibility_1">Visibility</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#graphql-extensions_1">GraphQL extensions</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#atomic-mutations">Atomic mutations</a>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../filtering/">Filtering</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ordering/">Ordering</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pagination/">Pagination</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../subscriptions/">Subscriptions</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../global-object-ids/">Global Object IDs</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../file-upload/">File Upload</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../persisted-documents/">Persisted Documents</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../interfaces/">Interfaces</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../unions/">Unions</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scalars/">Scalars</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../directives/">Directives</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hacking-undine/">Hacking Undine</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../optimizer/">Optimizer</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../async/">Async Support</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dataloaders/">DataLoaders</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../lifecycle-hooks/">Lifecycle Hooks</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../validation-rules/">Validation Rules</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../integrations/">Integrations</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../settings/">Settings</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq/">FAQ</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/">Contributing</a>
</li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">
<nav aria-label="Mobile navigation menu" class="wy-nav-top" role="navigation">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="..">Undine</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content"><div aria-label="breadcrumbs navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a aria-label="Docs" class="icon icon-home" href=".."></a></li>
<li class="breadcrumb-item active">Mutations</li>
<li class="wy-breadcrumbs-aside">
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div class="section" itemprop="articleBody">
<h1 id="mutations">Mutations<a class="headerlink" href="#mutations" title="Permanent link">ðŸ”—</a></h1>
<p>In this section, we'll cover Undine's <a href="#mutationtypes"><code>MutationTypes</code></a>
which allow you to create mutations base on your Django Models.</p>
<p>For mutations not concerning your Django Models,
you can create <a href="../schema/#function-references">function</a> <code>Entrypoints</code>.</p>
<h2 id="mutationtypes">MutationTypes<a class="headerlink" href="#mutationtypes" title="Permanent link">ðŸ”—</a></h2>
<p>A <code>MutationType</code> represents a GraphQL <code>InputObjectType</code> for mutating a Django Model in the GraphQL schema.
A basic <code>MutationType</code> is created by subclassing <code>MutationType</code>
and adding a Django Model to it as a generic type parameter. You must also add at least one
<a href="#inputs"><code>Input</code></a> to the class body of the <code>MutationType</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span>
<span class="normal"><a href="#__codelineno-0-2">2</a></span>
<span class="normal"><a href="#__codelineno-0-3">3</a></span>
<span class="normal"><a href="#__codelineno-0-4">4</a></span>
<span class="normal"><a href="#__codelineno-0-5">5</a></span>
<span class="normal"><a href="#__codelineno-0-6">6</a></span>
<span class="normal"><a href="#__codelineno-0-7">7</a></span>
<span class="normal"><a href="#__codelineno-0-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>    <span class="n">done</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h3 id="mutation-kind">Mutation kind<a class="headerlink" href="#mutation-kind" title="Permanent link">ðŸ”—</a></h3>
<p>How a mutation using a <code>MutationType</code> resolves is determined by its <code>kind</code>.
The basic types of mutations are <code>create</code>, <code>update</code>, and <code>delete</code>, which can be used
to create, update and delete instances of a <code>MutationType's</code> Model respectively.
There are also two special mutation kinds: <code>custom</code> and <code>related</code>, which are covered
in <a href="#custom-mutations">custom mutations</a> and <a href="#related-mutations">related mutations</a> respectively.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span>
<span class="normal"><a href="#__codelineno-1-2">2</a></span>
<span class="normal"><a href="#__codelineno-1-3">3</a></span>
<span class="normal"><a href="#__codelineno-1-4">4</a></span>
<span class="normal"><a href="#__codelineno-1-5">5</a></span>
<span class="normal"><a href="#__codelineno-1-6">6</a></span>
<span class="normal"><a href="#__codelineno-1-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">],</span> <span class="n">kind</span><span class="o">=</span><span class="s2">"create"</span><span class="p">):</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p><code>kind</code> can also be omitted, in which case the <code>MutationType</code>
will determine the mutation <code>kind</code> using these rules:</p>
<ol>
<li>If the word <code>create</code> can be found in the name of the <code>MutationType</code>, <code>kind</code> will be <code>create</code>.</li>
<li>If the word <code>update</code> can be found in the name of the <code>MutationType</code>, <code>kind</code> will be <code>update</code>.</li>
<li>If the word <code>delete</code> can be found in the name of the <code>MutationType</code>, <code>kind</code> will be <code>delete</code>.</li>
<li>If either the <code>__mutate__</code> or <code>__bulk_mutate__</code> method has been defined on the <code>MutationType</code>,
   <code>kind</code> will be <code>custom</code>.</li>
<li>Otherwise, an error will be raised.</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span>
<span class="normal"><a href="#__codelineno-2-2">2</a></span>
<span class="normal"><a href="#__codelineno-2-3">3</a></span>
<span class="normal"><a href="#__codelineno-2-4">4</a></span>
<span class="normal"><a href="#__codelineno-2-5">5</a></span>
<span class="normal"><a href="#__codelineno-2-6">6</a></span>
<span class="normal"><a href="#__codelineno-2-7">7</a></span>
<span class="normal"><a href="#__codelineno-2-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="c1"># Create mutation, since has "create" in the name.</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h3 id="auto-generation">Auto-generation<a class="headerlink" href="#auto-generation" title="Permanent link">ðŸ”—</a></h3>
<p>A <code>MutationType</code> can automatically introspect its Django Model and convert the Model's fields
to <code>Inputs</code> on the <code>MutationType</code>. For example, if the <code>Task</code> model has the following fields:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span>
<span class="normal"><a href="#__codelineno-3-5">5</a></span>
<span class="normal"><a href="#__codelineno-3-6">6</a></span>
<span class="normal"><a href="#__codelineno-3-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="k">class</span><span class="w"> </span><span class="nc">Task</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a>    <span class="n">done</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a>    <span class="n">created_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Then the GraphQL <code>InputObjectType</code> for a <code>MutationType</code> for a <code>create</code> mutation using auto-generation would be:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span>
<span class="normal"><a href="#__codelineno-4-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">input</span><span class="w"> </span><span class="err">TaskCreateMutation</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">    </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="err">!</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">    </span><span class="nl">done</span><span class="p">:</span><span class="w"> </span><span class="n">Boolean</span><span class="err">!</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="n">true</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">    </span><span class="c"># `createdAt` not included since it has `auto_now_add=True`</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>For an <code>update</code> mutation, the <code>pk</code> field is included for selecting the
mutation target, the rest of the fields are all made nullable (=not required),
and no default values are added. This is essentially a fully partial update mutation.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span>
<span class="normal"><a href="#__codelineno-5-2">2</a></span>
<span class="normal"><a href="#__codelineno-5-3">3</a></span>
<span class="normal"><a href="#__codelineno-5-4">4</a></span>
<span class="normal"><a href="#__codelineno-5-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="k">input</span><span class="w"> </span><span class="err">TaskUpdateMutation</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">    </span><span class="nl">pk</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="err">!</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">    </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">String</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">    </span><span class="nl">done</span><span class="p">:</span><span class="w"> </span><span class="n">Boolean</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>For a <code>delete</code> mutation, only the <code>pk</code> field is included for selecting the
instance to delete.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="k">input</span><span class="w"> </span><span class="err">TaskDeleteMutation</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">    </span><span class="nl">pk</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="err">!</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>To use auto-generation, either set <a href="../settings/#autogeneration"><code>AUTOGENERATION</code></a> setting to <code>True</code>
to enable it globally, or set the <code>auto</code> argument to <code>True</code> in the <code>MutationType</code> class definition.
With this, you can leave the <code>MutationType</code> class body empty.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span>
<span class="normal"><a href="#__codelineno-7-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">MutationType</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">],</span> <span class="n">auto</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span> <span class="o">...</span>
</code></pre></div></td></tr></table></div>
<p>You can exclude some Model fields from the auto-generation by setting the <code>exclude</code> argument:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span>
<span class="normal"><a href="#__codelineno-8-4">4</a></span>
<span class="normal"><a href="#__codelineno-8-5">5</a></span>
<span class="normal"><a href="#__codelineno-8-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">MutationType</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">],</span> <span class="n">auto</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s2">"name"</span><span class="p">]):</span> <span class="o">...</span>
</code></pre></div></td></tr></table></div>
<h3 id="output-type">Output type<a class="headerlink" href="#output-type" title="Permanent link">ðŸ”—</a></h3>
<p>By default, a <code>MutationType</code> uses a <code>QueryType</code> with the same Model as its output type.
This means that one must be created, even if not used for querying outside of the <code>MutationType</code>.
You don't need to explicitly link the <code>QueryType</code> to the <code>MutationType</code>
since the <code>MutationType</code> will automatically look up the <code>QueryType</code>
from the <a href="../queries/#querytype-registry"><code>QueryType</code> registry</a>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span>
<span class="normal"><a href="#__codelineno-9-14">14</a></span>
<span class="normal"><a href="#__codelineno-9-15">15</a></span>
<span class="normal"><a href="#__codelineno-9-16">16</a></span>
<span class="normal"><a href="#__codelineno-9-17">17</a></span>
<span class="normal"><a href="#__codelineno-9-18">18</a></span>
<span class="normal"><a href="#__codelineno-9-19">19</a></span>
<span class="normal"><a href="#__codelineno-9-20">20</a></span>
<span class="normal"><a href="#__codelineno-9-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Entrypoint</span><span class="p">,</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span><span class="p">,</span> <span class="n">QueryType</span><span class="p">,</span> <span class="n">RootType</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="c1"># This QueryType is registered and then used</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="c1"># by TaskCreateMutation as its output type since</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="c1"># they have the same Django Model.</span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskType</span><span class="p">(</span><span class="n">QueryType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a>    <span class="n">pk</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a>    <span class="n">done</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
<a id="__codelineno-9-13" name="__codelineno-9-13"></a>    <span class="n">created_at</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
<a id="__codelineno-9-14" name="__codelineno-9-14"></a>
<a id="__codelineno-9-15" name="__codelineno-9-15"></a>
<a id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-9-17" name="__codelineno-9-17"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-9-18" name="__codelineno-9-18"></a>
<a id="__codelineno-9-19" name="__codelineno-9-19"></a>
<a id="__codelineno-9-20" name="__codelineno-9-20"></a><span class="k">class</span><span class="w"> </span><span class="nc">Mutation</span><span class="p">(</span><span class="n">RootType</span><span class="p">):</span>
<a id="__codelineno-9-21" name="__codelineno-9-21"></a>    <span class="n">create_task</span> <span class="o">=</span> <span class="n">Entrypoint</span><span class="p">(</span><span class="n">TaskCreateMutation</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>This would create the following mutation in the GraphQL schema:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span>
<span class="normal"><a href="#__codelineno-10-12">12</a></span>
<span class="normal"><a href="#__codelineno-10-13">13</a></span>
<span class="normal"><a href="#__codelineno-10-14">14</a></span>
<span class="normal"><a href="#__codelineno-10-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="k">type</span><span class="w"> </span><span class="err">TaskType</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">    </span><span class="nl">pk</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="err">!</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">    </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="err">!</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">    </span><span class="nl">done</span><span class="p">:</span><span class="w"> </span><span class="n">Boolean</span><span class="err">!</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">    </span><span class="nl">createdAt</span><span class="p">:</span><span class="w"> </span><span class="n">DateTime</span><span class="err">!</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="p">}</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="k">input</span><span class="w"> </span><span class="err">TaskCreateMutation</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="w">    </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="err">!</span>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="w">    </span><span class="nl">done</span><span class="p">:</span><span class="w"> </span><span class="n">Boolean</span><span class="err">!</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="n">false</span>
<a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="p">}</span>
<a id="__codelineno-10-12" name="__codelineno-10-12"></a>
<a id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="k">type</span><span class="w"> </span><span class="err">Mutation</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-14" name="__codelineno-10-14"></a><span class="w">    </span><span class="n">createTask</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="no">TaskCreateMutation</span><span class="err">!</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">TaskType</span><span class="err">!</span>
<a id="__codelineno-10-15" name="__codelineno-10-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>If you wanted to link the <code>QueryType</code> explicitly, you could do so by overriding the
<code>__query_type__</code> classmethod.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span>
<span class="normal"><a href="#__codelineno-11-13">13</a></span>
<span class="normal"><a href="#__codelineno-11-14">14</a></span>
<span class="normal"><a href="#__codelineno-11-15">15</a></span>
<span class="normal"><a href="#__codelineno-11-16">16</a></span>
<span class="normal"><a href="#__codelineno-11-17">17</a></span>
<span class="normal"><a href="#__codelineno-11-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span><span class="p">,</span> <span class="n">QueryType</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskType</span><span class="p">(</span><span class="n">QueryType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a>    <span class="n">pk</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a>    <span class="n">done</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a>    <span class="n">created_at</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
<a id="__codelineno-11-11" name="__codelineno-11-11"></a>
<a id="__codelineno-11-12" name="__codelineno-11-12"></a>
<a id="__codelineno-11-13" name="__codelineno-11-13"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-11-14" name="__codelineno-11-14"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-11-15" name="__codelineno-11-15"></a>
<a id="__codelineno-11-16" name="__codelineno-11-16"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-11-17" name="__codelineno-11-17"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__query_type__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">QueryType</span><span class="p">]:</span>
<a id="__codelineno-11-18" name="__codelineno-11-18"></a>        <span class="k">return</span> <span class="n">TaskType</span>
</code></pre></div></td></tr></table></div>
<p>If you wanted a fully custom output type, you can override the <code>__output_type__</code> classmethod.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span>
<span class="normal"><a href="#__codelineno-12-11">11</a></span>
<span class="normal"><a href="#__codelineno-12-12">12</a></span>
<span class="normal"><a href="#__codelineno-12-13">13</a></span>
<span class="normal"><a href="#__codelineno-12-14">14</a></span>
<span class="normal"><a href="#__codelineno-12-15">15</a></span>
<span class="normal"><a href="#__codelineno-12-16">16</a></span>
<span class="normal"><a href="#__codelineno-12-17">17</a></span>
<span class="normal"><a href="#__codelineno-12-18">18</a></span>
<span class="normal"><a href="#__codelineno-12-19">19</a></span>
<span class="normal"><a href="#__codelineno-12-20">20</a></span>
<span class="normal"><a href="#__codelineno-12-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">graphql</span><span class="w"> </span><span class="kn">import</span> <span class="n">GraphQLField</span><span class="p">,</span> <span class="n">GraphQLInt</span><span class="p">,</span> <span class="n">GraphQLNonNull</span><span class="p">,</span> <span class="n">GraphQLObjectType</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine.utils.graphql.type_registry</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_or_create_graphql_object_type</span>
<a id="__codelineno-12-7" name="__codelineno-12-7"></a>
<a id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-12-9" name="__codelineno-12-9"></a>
<a id="__codelineno-12-10" name="__codelineno-12-10"></a>
<a id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-12-12" name="__codelineno-12-12"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-12-13" name="__codelineno-12-13"></a>
<a id="__codelineno-12-14" name="__codelineno-12-14"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-12-15" name="__codelineno-12-15"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__mutate__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Task</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">input_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<a id="__codelineno-12-16" name="__codelineno-12-16"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">"foo"</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<a id="__codelineno-12-17" name="__codelineno-12-17"></a>
<a id="__codelineno-12-18" name="__codelineno-12-18"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-12-19" name="__codelineno-12-19"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__output_type__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GraphQLObjectType</span><span class="p">:</span>
<a id="__codelineno-12-20" name="__codelineno-12-20"></a>        <span class="n">fields</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"foo"</span><span class="p">:</span> <span class="n">GraphQLField</span><span class="p">(</span><span class="n">GraphQLNonNull</span><span class="p">(</span><span class="n">GraphQLInt</span><span class="p">))}</span>
<a id="__codelineno-12-21" name="__codelineno-12-21"></a>        <span class="k">return</span> <span class="n">get_or_create_graphql_object_type</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"TaskMutationOutput"</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="n">fields</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="permissions">Permissions<a class="headerlink" href="#permissions" title="Permanent link">ðŸ”—</a></h3>
<p>You can add mutation-level permission checks to mutations executed using a <code>MutationType</code>
by defining the <code>__permissions__</code> classmethod.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span>
<span class="normal"><a href="#__codelineno-13-15">15</a></span>
<span class="normal"><a href="#__codelineno-13-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">GraphQLPermissionError</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-13-11" name="__codelineno-13-11"></a>
<a id="__codelineno-13-12" name="__codelineno-13-12"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-13-13" name="__codelineno-13-13"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__permissions__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Task</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">input_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-13-14" name="__codelineno-13-14"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">:</span>
<a id="__codelineno-13-15" name="__codelineno-13-15"></a>            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"Only authenticated users can create tasks."</span>
<a id="__codelineno-13-16" name="__codelineno-13-16"></a>            <span class="k">raise</span> <span class="n">GraphQLPermissionError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<details>
<summary>About method signature</summary>
<p>For <code>create</code> mutations, the <code>instance</code> is a brand new instance of the model.
Note that this also means that it doesn't have a primary key yet.</p>
<p>For <code>update</code> and <code>delete</code> mutations, <code>instance</code> is the existing model
instance that is being mutated.</p>
</details>
<p>This method will be called for each instance of <code>Task</code> that is mutated
by this <code>MutationType</code>.</p>
<p>You can raise any <code>GraphQLError</code> when a permission check fails, but it's recommended to
raise a <code>GraphQLPermissionError</code> from the <code>undine.exceptions</code> module.</p>
<h3 id="validation">Validation<a class="headerlink" href="#validation" title="Permanent link">ðŸ”—</a></h3>
<p>You can add mutation-level validation to mutations executed using a <code>MutationType</code>
by defining the <code>__validate__</code> classmethod.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span>
<span class="normal"><a href="#__codelineno-14-11">11</a></span>
<span class="normal"><a href="#__codelineno-14-12">12</a></span>
<span class="normal"><a href="#__codelineno-14-13">13</a></span>
<span class="normal"><a href="#__codelineno-14-14">14</a></span>
<span class="normal"><a href="#__codelineno-14-15">15</a></span>
<span class="normal"><a href="#__codelineno-14-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">GraphQLValidationError</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-14-11" name="__codelineno-14-11"></a>
<a id="__codelineno-14-12" name="__codelineno-14-12"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-14-13" name="__codelineno-14-13"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__validate__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Task</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">input_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-14-14" name="__codelineno-14-14"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">input_data</span><span class="p">[</span><span class="s2">"name"</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
<a id="__codelineno-14-15" name="__codelineno-14-15"></a>            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"Name must be at least 3 characters long."</span>
<a id="__codelineno-14-16" name="__codelineno-14-16"></a>            <span class="k">raise</span> <span class="n">GraphQLValidationError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<details>
<summary>About method signature</summary>
<p>For <code>create</code> mutations, the <code>instance</code> is a brand new instance of the model.
Note that this also means that it doesn't have a primary key yet.</p>
<p>For <code>update</code> and <code>delete</code> mutations, <code>instance</code> is the existing model
instance that is being mutated.</p>
</details>
<p>You can raise any <code>GraphQLError</code> when a validation check fails, but it's recommended to
raise a <code>GraphQLValidationError</code> from the <code>undine.exceptions</code> module.</p>
<h3 id="after-mutation-handling">After mutation handling<a class="headerlink" href="#after-mutation-handling" title="Permanent link">ðŸ”—</a></h3>
<p>You can add custom handling that happens after the mutation is done by defining the<code>__after__</code>
classmethod on the <code>MutationType</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-15-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-15-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-15-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-15-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-15-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-15-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-15-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-15-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-15-10">10</a></span>
<span class="normal"><a href="#__codelineno-15-11">11</a></span>
<span class="normal"><a href="#__codelineno-15-12">12</a></span>
<span class="normal"><a href="#__codelineno-15-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a>
<a id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-15-9" name="__codelineno-15-9"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-15-10" name="__codelineno-15-10"></a>
<a id="__codelineno-15-11" name="__codelineno-15-11"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-15-12" name="__codelineno-15-12"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__after__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Task</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">input_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-15-13" name="__codelineno-15-13"></a>        <span class="k">pass</span>  <span class="c1"># Some post-mutation handling here</span>
</code></pre></div></td></tr></table></div>
<details>
<summary>About method signature</summary>
<p>For <code>create</code> and <code>update</code> mutations, <code>instance</code> is the model instance that was either
created or updated.</p>
<p>For <code>delete</code> mutations, <code>instance</code> is the instance that was deleted.
This means that its relations have been disconnected, and its primary key
has been set to <code>None</code>.</p>
<p><code>input_data</code> contains the input data that was used in the mutation.</p>
</details>
<p>This can be useful for doing things like sending emails.</p>
<h3 id="custom-mutations">Custom mutations<a class="headerlink" href="#custom-mutations" title="Permanent link">ðŸ”—</a></h3>
<p>You can define your own custom logic by defining the <code>__mutate__</code> or <code>__bulk_mutate__</code> method on
the <code>MutationType</code> class for single or bulk mutations respectively.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span>
<span class="normal"><a href="#__codelineno-16-16">16</a></span>
<span class="normal"><a href="#__codelineno-16-17">17</a></span>
<span class="normal"><a href="#__codelineno-16-18">18</a></span>
<span class="normal"><a href="#__codelineno-16-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">],</span> <span class="n">kind</span><span class="o">=</span><span class="s2">"create"</span><span class="p">):</span>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-16-10" name="__codelineno-16-10"></a>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-16-12" name="__codelineno-16-12"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__mutate__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Task</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">input_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Task</span><span class="p">:</span>
<a id="__codelineno-16-13" name="__codelineno-16-13"></a>        <span class="c1"># Some custom mutation logic here</span>
<a id="__codelineno-16-14" name="__codelineno-16-14"></a>        <span class="k">return</span> <span class="n">instance</span>
<a id="__codelineno-16-15" name="__codelineno-16-15"></a>
<a id="__codelineno-16-16" name="__codelineno-16-16"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-16-17" name="__codelineno-16-17"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__bulk_mutate__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">instances</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Task</span><span class="p">],</span> <span class="n">info</span><span class="p">:</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">input_data</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Task</span><span class="p">]:</span>
<a id="__codelineno-16-18" name="__codelineno-16-18"></a>        <span class="c1"># Some custom bulk mutation logic here</span>
<a id="__codelineno-16-19" name="__codelineno-16-19"></a>        <span class="k">return</span> <span class="n">instances</span>
</code></pre></div></td></tr></table></div>
<p>In the above example, the <code>MutationType</code> still a <code>create</code> mutation,
just with some custom mutation logic. The <code>MutationType</code> <code>kind</code> still affects <a href="#auto-generation">auto-generation</a>,
which resolvers are used (whether the mutation creates a new instance or modifies an existing one),
as well as some inference rules for its <code>Inputs</code>.</p>
<p>You can also use a special <code>custom</code> mutation <code>kind</code> when using custom resolvers.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">],</span> <span class="n">kind</span><span class="o">=</span><span class="s2">"custom"</span><span class="p">):</span>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-17-12" name="__codelineno-17-12"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__mutate__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Task</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">input_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Task</span><span class="p">:</span>
<a id="__codelineno-17-13" name="__codelineno-17-13"></a>        <span class="c1"># Some custom mutation logic here</span>
<a id="__codelineno-17-14" name="__codelineno-17-14"></a>        <span class="k">return</span> <span class="n">instance</span>
</code></pre></div></td></tr></table></div>
<p>This affects the creation of the <code>MutationType</code> in the following ways:</p>
<ul>
<li><a href="#auto-generation">Auto-generation</a> is not used, even if it is enabled</li>
<li>No <code>Input</code> is <a href="#input-only-inputs">input-only</a> by default</li>
</ul>
<p><code>Custom</code> mutations will resolve like create or update mutations, depending
on if an <code>Input</code> named <code>pk</code> is present on the <code>MutationType</code>.</p>
<p>By default, the output type of a custom mutation is still the <code>ObjectType</code>
from the <code>QueryType</code> matching the <code>MutationType's</code> Model. If your custom
mutation returns an instance of that Model, it will work without additional changes.
However, if you want to return a different type, you can do so by overriding
the <code>__output_type__</code> classmethod on the <code>MutationType</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-18-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-18-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-18-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-18-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-18-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-18-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-18-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-18-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-18-10">10</a></span>
<span class="normal"><a href="#__codelineno-18-11">11</a></span>
<span class="normal"><a href="#__codelineno-18-12">12</a></span>
<span class="normal"><a href="#__codelineno-18-13">13</a></span>
<span class="normal"><a href="#__codelineno-18-14">14</a></span>
<span class="normal"><a href="#__codelineno-18-15">15</a></span>
<span class="normal"><a href="#__codelineno-18-16">16</a></span>
<span class="normal"><a href="#__codelineno-18-17">17</a></span>
<span class="normal"><a href="#__codelineno-18-18">18</a></span>
<span class="normal"><a href="#__codelineno-18-19">19</a></span>
<span class="normal"><a href="#__codelineno-18-20">20</a></span>
<span class="normal"><a href="#__codelineno-18-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">graphql</span><span class="w"> </span><span class="kn">import</span> <span class="n">GraphQLField</span><span class="p">,</span> <span class="n">GraphQLInt</span><span class="p">,</span> <span class="n">GraphQLNonNull</span><span class="p">,</span> <span class="n">GraphQLObjectType</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine.utils.graphql.type_registry</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_or_create_graphql_object_type</span>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a>
<a id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-18-9" name="__codelineno-18-9"></a>
<a id="__codelineno-18-10" name="__codelineno-18-10"></a>
<a id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-18-12" name="__codelineno-18-12"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-18-13" name="__codelineno-18-13"></a>
<a id="__codelineno-18-14" name="__codelineno-18-14"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-18-15" name="__codelineno-18-15"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__mutate__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Task</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">input_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<a id="__codelineno-18-16" name="__codelineno-18-16"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">"foo"</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<a id="__codelineno-18-17" name="__codelineno-18-17"></a>
<a id="__codelineno-18-18" name="__codelineno-18-18"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-18-19" name="__codelineno-18-19"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__output_type__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GraphQLObjectType</span><span class="p">:</span>
<a id="__codelineno-18-20" name="__codelineno-18-20"></a>        <span class="n">fields</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"foo"</span><span class="p">:</span> <span class="n">GraphQLField</span><span class="p">(</span><span class="n">GraphQLNonNull</span><span class="p">(</span><span class="n">GraphQLInt</span><span class="p">))}</span>
<a id="__codelineno-18-21" name="__codelineno-18-21"></a>        <span class="k">return</span> <span class="n">get_or_create_graphql_object_type</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"TaskMutationOutput"</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="n">fields</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="related-mutations">Related mutations<a class="headerlink" href="#related-mutations" title="Permanent link">ðŸ”—</a></h3>
<p>Let's say you have the following models:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span>
<span class="normal"><a href="#__codelineno-19-11">11</a></span>
<span class="normal"><a href="#__codelineno-19-12">12</a></span>
<span class="normal"><a href="#__codelineno-19-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="k">class</span><span class="w"> </span><span class="nc">Project</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a>
<a id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="k">class</span><span class="w"> </span><span class="nc">Task</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<a id="__codelineno-19-9" name="__codelineno-19-9"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
<a id="__codelineno-19-10" name="__codelineno-19-10"></a>    <span class="n">done</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-19-11" name="__codelineno-19-11"></a>    <span class="n">created_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-19-12" name="__codelineno-19-12"></a>
<a id="__codelineno-19-13" name="__codelineno-19-13"></a>    <span class="n">project</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Project</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">"tasks"</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>If you wanted to create both a <code>Task</code> and its related <code>Project</code> in a single mutation,
you could link two mutation types using a special <code>related</code> <code>kind</code> of <code>MutationType</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-20-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-20-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-20-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-20-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-20-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-20-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-20-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-20-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-20-10">10</a></span>
<span class="normal"><a href="#__codelineno-20-11">11</a></span>
<span class="normal"><a href="#__codelineno-20-12">12</a></span>
<span class="normal"><a href="#__codelineno-20-13">13</a></span>
<span class="normal"><a href="#__codelineno-20-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Project</span><span class="p">,</span> <span class="n">Task</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskProject</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Project</span><span class="p">],</span> <span class="n">kind</span><span class="o">=</span><span class="s2">"related"</span><span class="p">):</span>
<a id="__codelineno-20-7" name="__codelineno-20-7"></a>    <span class="n">pk</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-20-8" name="__codelineno-20-8"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-20-9" name="__codelineno-20-9"></a>
<a id="__codelineno-20-10" name="__codelineno-20-10"></a>
<a id="__codelineno-20-11" name="__codelineno-20-11"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-20-12" name="__codelineno-20-12"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-20-13" name="__codelineno-20-13"></a>    <span class="n">done</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-20-14" name="__codelineno-20-14"></a>    <span class="n">project</span> <span class="o">=</span> <span class="n">Input</span><span class="p">(</span><span class="n">TaskProject</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>This creates the following <code>InputObjectTypes</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-21-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-21-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-21-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-21-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-21-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-21-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-21-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-21-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-21-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="k">input</span><span class="w"> </span><span class="err">TaskProject</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="w">    </span><span class="nl">pk</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="w">    </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">String</span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="p">}</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a>
<a id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="k">input</span><span class="w"> </span><span class="err">TaskCreateMutation</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="w">    </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="err">!</span>
<a id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="w">    </span><span class="nl">done</span><span class="p">:</span><span class="w"> </span><span class="n">Boolean</span><span class="err">!</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="n">false</span>
<a id="__codelineno-21-9" name="__codelineno-21-9"></a><span class="hll"><span class="w">    </span><span class="nl">project</span><span class="p">:</span><span class="w"> </span><span class="n">TaskProject</span><span class="err">!</span>
</span><a id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p><a href="#auto-generation">Auto-generation</a> and inference rules for <code>related</code> <code>MutationTypes</code>
are the same as for <code>update</code> <code>MutationTypes</code>, except the <code>pk</code> field is also not required.
This allows you to create, update, link, or unlink new or existing related models
during the mutation as you see fit.</p>
<p>Let's give a few examples. Assuming you added the <code>TaskCreateMutation</code> to the schema with
an <code>Entrypoint</code> <code>create_task</code>, you can create a new <code>Task</code> together with a new <code>Project</code> like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-22-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-22-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-22-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-22-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-22-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-22-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-22-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-22-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-22-10">10</a></span>
<span class="normal"><a href="#__codelineno-22-11">11</a></span>
<span class="normal"><a href="#__codelineno-22-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="k">mutation</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="w">  </span><span class="n">createTask</span><span class="p">(</span>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="w">    </span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">      </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s">"New task"</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="w">      </span><span class="n">project</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="w">        </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s">"New project"</span>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="w">    </span><span class="n">pk</span>
<a id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-22-12" name="__codelineno-22-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Or you can link an existing <code>Project</code> to a new <code>Task</code> like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-23-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-23-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-23-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-23-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-23-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-23-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-23-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-23-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-23-10">10</a></span>
<span class="normal"><a href="#__codelineno-23-11">11</a></span>
<span class="normal"><a href="#__codelineno-23-12">12</a></span>
<span class="normal"><a href="#__codelineno-23-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="k">mutation</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="w">  </span><span class="n">createTask</span><span class="p">(</span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="w">    </span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="w">      </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s">"New task"</span>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="w">      </span><span class="n">project</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="w">        </span><span class="n">pk</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<a id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-10" name="__codelineno-23-10"></a><span class="w">    </span><span class="n">pk</span>
<a id="__codelineno-23-11" name="__codelineno-23-11"></a><span class="w">    </span><span class="n">name</span>
<a id="__codelineno-23-12" name="__codelineno-23-12"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-23-13" name="__codelineno-23-13"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Or you can link an existing project while modifying it:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-24-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-24-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-24-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-24-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-24-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-24-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-24-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-24-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-24-10">10</a></span>
<span class="normal"><a href="#__codelineno-24-11">11</a></span>
<span class="normal"><a href="#__codelineno-24-12">12</a></span>
<span class="normal"><a href="#__codelineno-24-13">13</a></span>
<span class="normal"><a href="#__codelineno-24-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="k">mutation</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="w">  </span><span class="n">createTask</span><span class="p">(</span>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="w">    </span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="w">      </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s">"New task"</span>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="w">      </span><span class="n">project</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="w">        </span><span class="n">pk</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<a id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="w">        </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Updated project"</span>
<a id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-24-9" name="__codelineno-24-9"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-24-10" name="__codelineno-24-10"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-11" name="__codelineno-24-11"></a><span class="w">    </span><span class="n">pk</span>
<a id="__codelineno-24-12" name="__codelineno-24-12"></a><span class="w">    </span><span class="n">name</span>
<a id="__codelineno-24-13" name="__codelineno-24-13"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-24-14" name="__codelineno-24-14"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Permission an validation checks are run for <code>related</code> <code>MutationTypes</code> and their <code>Inputs</code> as well,
although existing instances are not fetched from the database even if the input contains its primary key
(for performance reasons).</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-25-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-25-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-25-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-25-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-25-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-25-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-25-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-25-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-25-10">10</a></span>
<span class="normal"><a href="#__codelineno-25-11">11</a></span>
<span class="normal"><a href="#__codelineno-25-12">12</a></span>
<span class="normal"><a href="#__codelineno-25-13">13</a></span>
<span class="normal"><a href="#__codelineno-25-14">14</a></span>
<span class="normal"><a href="#__codelineno-25-15">15</a></span>
<span class="normal"><a href="#__codelineno-25-16">16</a></span>
<span class="normal"><a href="#__codelineno-25-17">17</a></span>
<span class="normal"><a href="#__codelineno-25-18">18</a></span>
<span class="normal"><a href="#__codelineno-25-19">19</a></span>
<span class="normal"><a href="#__codelineno-25-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-25-4" name="__codelineno-25-4"></a>
<a id="__codelineno-25-5" name="__codelineno-25-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Project</span><span class="p">,</span> <span class="n">Task</span>
<a id="__codelineno-25-6" name="__codelineno-25-6"></a>
<a id="__codelineno-25-7" name="__codelineno-25-7"></a>
<a id="__codelineno-25-8" name="__codelineno-25-8"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskProject</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Project</span><span class="p">],</span> <span class="n">kind</span><span class="o">=</span><span class="s2">"related"</span><span class="p">):</span>
<a id="__codelineno-25-9" name="__codelineno-25-9"></a>    <span class="n">pk</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-25-10" name="__codelineno-25-10"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-25-11" name="__codelineno-25-11"></a>
<a id="__codelineno-25-12" name="__codelineno-25-12"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-25-13" name="__codelineno-25-13"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__permissions__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Project</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">input_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-25-14" name="__codelineno-25-14"></a>        <span class="c1"># Some permission check logic here</span>
<a id="__codelineno-25-15" name="__codelineno-25-15"></a>        <span class="k">return</span>
<a id="__codelineno-25-16" name="__codelineno-25-16"></a>
<a id="__codelineno-25-17" name="__codelineno-25-17"></a>
<a id="__codelineno-25-18" name="__codelineno-25-18"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-25-19" name="__codelineno-25-19"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-25-20" name="__codelineno-25-20"></a>    <span class="n">project</span> <span class="o">=</span> <span class="n">Input</span><span class="p">(</span><span class="n">TaskProject</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Note that if the <code>Input</code> connecting the <code>related</code> <code>MutationType</code> defines a permission or validation check,
that check is run instead of the <code>related</code> <code>MutationType</code> permission or validation check.</p>
<h3 id="related-mutation-action">Related mutation action<a class="headerlink" href="#related-mutation-action" title="Permanent link">ðŸ”—</a></h3>
<p>When updating an instance and its relations using a related mutation,
that instance may already have existing related objects. For some relations,
it's clear what should happen to relations that are not selected in the related mutation.</p>
<ul>
<li><strong>Forward one-to-one relation</strong>: Selects the new related object to attach to, or set the relation to null.
  Reverse one-to-one relation can always be missing.</li>
<li><strong>Forward foreign key (many-to-one) relation</strong>: Selects the new related object to attach to, or set the relation to null.
  Reverse relations do not have any constraints.</li>
<li><strong>Many-to-many relations</strong>: Selects the new related objects that the current instance should be linked to.
  Non-selected objects are unlinked, meaning through table rows are deleted.</li>
</ul>
<p>For other relations, you might need different behavior depending on the situation:</p>
<ul>
<li><strong>Reverse one-to-one relation</strong>: You might want to delete the exiting related object, or set the relation to null
  (although the forward part of the relation might not be nullable).</li>
<li><strong>Reverse foreign key (one-to-many) relation</strong>: You might want to delete exiting related objects,
  or set their relation to null (although the forward part of the relation might not be nullable).
  You might even want to leave the existing relations as they are.</li>
</ul>
<p>The action that should be taken for the relations is defined by the <code>MutationType</code> <code>related_action</code> argument.
The actions are as follows:</p>
<ul>
<li><code>null</code>: Set the relaton to null. If the relation is not nullable, an error is raised. Default action.</li>
<li><code>delete</code>: Delete the related objects.</li>
<li><code>ignore</code>: Leave the existing relations as they are. For one-to-one relations, an error is raised.</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-26-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-26-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-26-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-26-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-26-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-26-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-26-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-26-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-26-10">10</a></span>
<span class="normal"><a href="#__codelineno-26-11">11</a></span>
<span class="normal"><a href="#__codelineno-26-12">12</a></span>
<span class="normal"><a href="#__codelineno-26-13">13</a></span>
<span class="normal"><a href="#__codelineno-26-14">14</a></span>
<span class="normal"><a href="#__codelineno-26-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Project</span><span class="p">,</span> <span class="n">Task</span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a>
<a id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">ProjectTask</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">],</span> <span class="n">kind</span><span class="o">=</span><span class="s2">"related"</span><span class="p">):</span>
<a id="__codelineno-26-7" name="__codelineno-26-7"></a>    <span class="n">pk</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-26-8" name="__codelineno-26-8"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-26-9" name="__codelineno-26-9"></a>
<a id="__codelineno-26-10" name="__codelineno-26-10"></a>
<a id="__codelineno-26-11" name="__codelineno-26-11"></a><span class="k">class</span><span class="w"> </span><span class="nc">ProjectUpdateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Project</span><span class="p">],</span> <span class="n">related_action</span><span class="o">=</span><span class="s2">"delete"</span><span class="p">):</span>
<a id="__codelineno-26-12" name="__codelineno-26-12"></a>    <span class="n">pk</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-26-13" name="__codelineno-26-13"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-26-14" name="__codelineno-26-14"></a>    <span class="n">done</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-26-15" name="__codelineno-26-15"></a>    <span class="n">tasks</span> <span class="o">=</span> <span class="n">Input</span><span class="p">(</span><span class="n">ProjectTask</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Note that this action applies to all related mutations executed from the "parent" <code>MutationType</code>.
If you need more granular control, you should make the mutation a <a href="#custom-mutations">custom mutation</a>
instead.</p>
<h3 id="order-of-operations">Order of operations<a class="headerlink" href="#order-of-operations" title="Permanent link">ðŸ”—</a></h3>
<p>The order of operations for executing a mutation using a <code>MutationType</code> is as follows:</p>
<ol>
<li><a href="#model-field-references">Model inputs</a> have their Model instances fetched.</li>
<li><a href="#hidden-inputs">Hidden inputs</a> are be added to the input data.</li>
<li><a href="#function-references">Function inputs</a> are run.</li>
<li><code>MutationType</code> <a href="#permissions">permissions</a> and <code>Input</code> <a href="#permissions_1">permissions</a> are checked.</li>
<li><code>MutationType</code> <a href="#validation">validation</a> and <code>Input</code> <a href="#validation_1">validation</a> are run.</li>
<li><a href="#input-only-inputs">Input-only inputs</a> are removed from the input data.</li>
<li>Mutation is executed.</li>
<li><code>MutationType</code> <a href="#after-mutation-handling">after handling</a> is run.</li>
</ol>
<p>If multiple <code>GraphQLErrors</code> are raised in the permission or validation steps for different inputs,
those errors are returned together. The error's <code>path</code> will point to the <code>Input</code> where
the exception was raised.</p>
<details>
<summary>Example result with multiple errors</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-27-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-27-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-27-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-27-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-27-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-27-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-27-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-27-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-27-10">10</a></span>
<span class="normal"><a href="#__codelineno-27-11">11</a></span>
<span class="normal"><a href="#__codelineno-27-12">12</a></span>
<span class="normal"><a href="#__codelineno-27-13">13</a></span>
<span class="normal"><a href="#__codelineno-27-14">14</a></span>
<span class="normal"><a href="#__codelineno-27-15">15</a></span>
<span class="normal"><a href="#__codelineno-27-16">16</a></span>
<span class="normal"><a href="#__codelineno-27-17">17</a></span>
<span class="normal"><a href="#__codelineno-27-18">18</a></span>
<span class="normal"><a href="#__codelineno-27-19">19</a></span>
<span class="normal"><a href="#__codelineno-27-20">20</a></span>
<span class="normal"><a href="#__codelineno-27-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="p">{</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="w">    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="w">    </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="w">            </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Validation error."</span><span class="p">,</span>
<a id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="w">            </span><span class="nt">"extensions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-7" name="__codelineno-27-7"></a><span class="w">                </span><span class="nt">"status_code"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span>
<a id="__codelineno-27-8" name="__codelineno-27-8"></a><span class="w">                </span><span class="nt">"error_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VALIDATION_ERROR"</span>
<a id="__codelineno-27-9" name="__codelineno-27-9"></a><span class="w">            </span><span class="p">},</span>
<a id="__codelineno-27-10" name="__codelineno-27-10"></a><span class="hll"><span class="w">            </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"createTask"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name"</span><span class="p">]</span>
</span><a id="__codelineno-27-11" name="__codelineno-27-11"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-27-12" name="__codelineno-27-12"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-27-13" name="__codelineno-27-13"></a><span class="w">            </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Validation error."</span><span class="p">,</span>
<a id="__codelineno-27-14" name="__codelineno-27-14"></a><span class="w">            </span><span class="nt">"extensions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-15" name="__codelineno-27-15"></a><span class="w">                </span><span class="nt">"status_code"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span>
<a id="__codelineno-27-16" name="__codelineno-27-16"></a><span class="w">                </span><span class="nt">"error_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VALIDATION_ERROR"</span>
<a id="__codelineno-27-17" name="__codelineno-27-17"></a><span class="w">            </span><span class="p">},</span>
<a id="__codelineno-27-18" name="__codelineno-27-18"></a><span class="hll"><span class="w">            </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"createTask"</span><span class="p">,</span><span class="w"> </span><span class="s2">"done"</span><span class="p">]</span>
</span><a id="__codelineno-27-19" name="__codelineno-27-19"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-27-20" name="__codelineno-27-20"></a><span class="w">    </span><span class="p">]</span>
<a id="__codelineno-27-21" name="__codelineno-27-21"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="schema-name">Schema name<a class="headerlink" href="#schema-name" title="Permanent link">ðŸ”—</a></h3>
<p>By default, the name of the generated GraphQL <code>InputObjectType</code> for a <code>MutationType</code> class
is the name of the <code>MutationType</code> class. If you want to change the name separately,
you can do so by setting the <code>schema_name</code> argument:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1">1</a></span>
<span class="normal"><a href="#__codelineno-28-2">2</a></span>
<span class="normal"><a href="#__codelineno-28-3">3</a></span>
<span class="normal"><a href="#__codelineno-28-4">4</a></span>
<span class="normal"><a href="#__codelineno-28-5">5</a></span>
<span class="normal"><a href="#__codelineno-28-6">6</a></span>
<span class="normal"><a href="#__codelineno-28-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a>
<a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">],</span> <span class="n">schema_name</span><span class="o">=</span><span class="s2">"CreateTask"</span><span class="p">):</span>
<a id="__codelineno-28-7" name="__codelineno-28-7"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h3 id="description">Description<a class="headerlink" href="#description" title="Permanent link">ðŸ”—</a></h3>
<p>To provide a description for the <code>MutationType</code>, you can add a docstring to the class.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1">1</a></span>
<span class="normal"><a href="#__codelineno-29-2">2</a></span>
<span class="normal"><a href="#__codelineno-29-3">3</a></span>
<span class="normal"><a href="#__codelineno-29-4">4</a></span>
<span class="normal"><a href="#__codelineno-29-5">5</a></span>
<span class="normal"><a href="#__codelineno-29-6">6</a></span>
<span class="normal"><a href="#__codelineno-29-7">7</a></span>
<span class="normal"><a href="#__codelineno-29-8">8</a></span>
<span class="normal"><a href="#__codelineno-29-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a>
<a id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="w">    </span><span class="sd">"""Description."""</span>
<a id="__codelineno-29-8" name="__codelineno-29-8"></a>
<a id="__codelineno-29-9" name="__codelineno-29-9"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h3 id="directives">Directives<a class="headerlink" href="#directives" title="Permanent link">ðŸ”—</a></h3>
<p>You can add directives to the <code>MutationType</code> by providing them using the <code>directives</code> argument.
The directive must be usable in the <code>INPUT_OBJECT</code> location.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-30-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-30-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-30-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-30-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-30-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-30-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-30-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-30-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-30-10">10</a></span>
<span class="normal"><a href="#__codelineno-30-11">11</a></span>
<span class="normal"><a href="#__codelineno-30-12">12</a></span>
<span class="normal"><a href="#__codelineno-30-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">graphql</span><span class="w"> </span><span class="kn">import</span> <span class="n">DirectiveLocation</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine.directives</span><span class="w"> </span><span class="kn">import</span> <span class="n">Directive</span>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a>
<a id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-30-7" name="__codelineno-30-7"></a>
<a id="__codelineno-30-8" name="__codelineno-30-8"></a>
<a id="__codelineno-30-9" name="__codelineno-30-9"></a><span class="k">class</span><span class="w"> </span><span class="nc">MyDirective</span><span class="p">(</span><span class="n">Directive</span><span class="p">,</span> <span class="n">locations</span><span class="o">=</span><span class="p">[</span><span class="n">DirectiveLocation</span><span class="o">.</span><span class="n">INPUT_OBJECT</span><span class="p">]):</span> <span class="o">...</span>
<a id="__codelineno-30-10" name="__codelineno-30-10"></a>
<a id="__codelineno-30-11" name="__codelineno-30-11"></a>
<a id="__codelineno-30-12" name="__codelineno-30-12"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">],</span> <span class="n">directives</span><span class="o">=</span><span class="p">[</span><span class="n">MyDirective</span><span class="p">()]):</span>
<a id="__codelineno-30-13" name="__codelineno-30-13"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>You can also add them using the decorator syntax.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-31-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-31-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-31-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-31-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-31-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-31-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-31-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-31-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-31-10">10</a></span>
<span class="normal"><a href="#__codelineno-31-11">11</a></span>
<span class="normal"><a href="#__codelineno-31-12">12</a></span>
<span class="normal"><a href="#__codelineno-31-13">13</a></span>
<span class="normal"><a href="#__codelineno-31-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">graphql</span><span class="w"> </span><span class="kn">import</span> <span class="n">DirectiveLocation</span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a>
<a id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine.directives</span><span class="w"> </span><span class="kn">import</span> <span class="n">Directive</span>
<a id="__codelineno-31-5" name="__codelineno-31-5"></a>
<a id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-31-7" name="__codelineno-31-7"></a>
<a id="__codelineno-31-8" name="__codelineno-31-8"></a>
<a id="__codelineno-31-9" name="__codelineno-31-9"></a><span class="k">class</span><span class="w"> </span><span class="nc">MyDirective</span><span class="p">(</span><span class="n">Directive</span><span class="p">,</span> <span class="n">locations</span><span class="o">=</span><span class="p">[</span><span class="n">DirectiveLocation</span><span class="o">.</span><span class="n">INPUT_OBJECT</span><span class="p">]):</span> <span class="o">...</span>
<a id="__codelineno-31-10" name="__codelineno-31-10"></a>
<a id="__codelineno-31-11" name="__codelineno-31-11"></a>
<a id="__codelineno-31-12" name="__codelineno-31-12"></a><span class="nd">@MyDirective</span><span class="p">()</span>
<a id="__codelineno-31-13" name="__codelineno-31-13"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-31-14" name="__codelineno-31-14"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>See the <a href="../directives/">Directives</a> section for more details on directives.</p>
<h3 id="visibility">Visibility<a class="headerlink" href="#visibility" title="Permanent link">ðŸ”—</a></h3>
<blockquote>
<p>This is an experimental feature that needs to be enabled using the
<a href="../settings/#experimental_visibility_checks"><code>EXPERIMENTAL_VISIBILITY_CHECKS</code></a> setting.</p>
</blockquote>
<p>You can hide a <code>MutationType</code> from certain users using the <code>__is_visible__</code> method.
Hiding an <code>MutationType</code> means that it will not be included in introspection queries,
and trying to use it in operations will result in an error that looks exactly like
the <code>Entrypoint</code> or <code>Input</code> using the <code>MutationType</code> didn't exist in the first place.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-32-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-32-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-32-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-32-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-32-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-32-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-32-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-32-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-32-10">10</a></span>
<span class="normal"><a href="#__codelineno-32-11">11</a></span>
<span class="normal"><a href="#__codelineno-32-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine.typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">DjangoRequestProtocol</span>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a>
<a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-32-5" name="__codelineno-32-5"></a>
<a id="__codelineno-32-6" name="__codelineno-32-6"></a>
<a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-32-8" name="__codelineno-32-8"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-32-9" name="__codelineno-32-9"></a>
<a id="__codelineno-32-10" name="__codelineno-32-10"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-32-11" name="__codelineno-32-11"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__is_visible__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">DjangoRequestProtocol</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-32-12" name="__codelineno-32-12"></a>        <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<p>When using visibility checks, you should also disable "did you mean" suggestions
using the <a href="../settings/#allow_did_you_mean_suggestions"><code>ALLOW_DID_YOU_MEAN_SUGGESTIONS</code></a> setting.
Otherwise, a hidden field might show up in them.</p>
</blockquote>
<h3 id="graphql-extensions">GraphQL extensions<a class="headerlink" href="#graphql-extensions" title="Permanent link">ðŸ”—</a></h3>
<p>You can provide custom extensions for the <code>MutationType</code> by providing a
<code>extensions</code> argument with a dictionary containing them. These can then be used
however you wish to extend the functionality of the <code>MutationType</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1">1</a></span>
<span class="normal"><a href="#__codelineno-33-2">2</a></span>
<span class="normal"><a href="#__codelineno-33-3">3</a></span>
<span class="normal"><a href="#__codelineno-33-4">4</a></span>
<span class="normal"><a href="#__codelineno-33-5">5</a></span>
<span class="normal"><a href="#__codelineno-33-6">6</a></span>
<span class="normal"><a href="#__codelineno-33-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-33-4" name="__codelineno-33-4"></a>
<a id="__codelineno-33-5" name="__codelineno-33-5"></a>
<a id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">],</span> <span class="n">extensions</span><span class="o">=</span><span class="p">{</span><span class="s2">"foo"</span><span class="p">:</span> <span class="s2">"bar"</span><span class="p">}):</span>
<a id="__codelineno-33-7" name="__codelineno-33-7"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p><code>MutationType</code> extensions are made available in the GraphQL <code>InputObjectType</code> extensions
after the schema is created. The <code>MutationType</code> itself is found in the GraphQL <code>InputObjectType</code> extensions
under a key defined by the <code>MUTATION_TYPE_EXTENSIONS_KEY</code> setting.</p>
<h2 id="inputs">Inputs<a class="headerlink" href="#inputs" title="Permanent link">ðŸ”—</a></h2>
<p>An <code>Input</code> is used to define a possible input in a <code>MutationType</code>.
Usually <code>Inputs</code> correspond to fields on the Django Model for their respective <code>MutationType</code>.
In GraphQL, an <code>Input</code> represents a <code>GraphQLInputField</code> on an <code>InputObjectType</code>.</p>
<p>An <code>Input</code> always requires a <em><strong>reference</strong></em> from which it will create the proper
input type and default value for the <code>Input</code>.</p>
<h3 id="model-field-references">Model field references<a class="headerlink" href="#model-field-references" title="Permanent link">ðŸ”—</a></h3>
<p>For <code>Inputs</code> corresponding to Django Model fields, the <code>Input</code> can be used without passing in a reference,
as its attribute name in the <code>MutationType</code> class body can be used to identify
the corresponding model field.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1">1</a></span>
<span class="normal"><a href="#__codelineno-34-2">2</a></span>
<span class="normal"><a href="#__codelineno-34-3">3</a></span>
<span class="normal"><a href="#__codelineno-34-4">4</a></span>
<span class="normal"><a href="#__codelineno-34-5">5</a></span>
<span class="normal"><a href="#__codelineno-34-6">6</a></span>
<span class="normal"><a href="#__codelineno-34-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-34-2" name="__codelineno-34-2"></a>
<a id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-34-4" name="__codelineno-34-4"></a>
<a id="__codelineno-34-5" name="__codelineno-34-5"></a>
<a id="__codelineno-34-6" name="__codelineno-34-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-34-7" name="__codelineno-34-7"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>To be a bit more explicit, you could use a string referencing the model field:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1">1</a></span>
<span class="normal"><a href="#__codelineno-35-2">2</a></span>
<span class="normal"><a href="#__codelineno-35-3">3</a></span>
<span class="normal"><a href="#__codelineno-35-4">4</a></span>
<span class="normal"><a href="#__codelineno-35-5">5</a></span>
<span class="normal"><a href="#__codelineno-35-6">6</a></span>
<span class="normal"><a href="#__codelineno-35-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-35-2" name="__codelineno-35-2"></a>
<a id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-35-4" name="__codelineno-35-4"></a>
<a id="__codelineno-35-5" name="__codelineno-35-5"></a>
<a id="__codelineno-35-6" name="__codelineno-35-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-35-7" name="__codelineno-35-7"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">(</span><span class="s2">"name"</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>For better type safety, you can also use the model field itself:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1">1</a></span>
<span class="normal"><a href="#__codelineno-36-2">2</a></span>
<span class="normal"><a href="#__codelineno-36-3">3</a></span>
<span class="normal"><a href="#__codelineno-36-4">4</a></span>
<span class="normal"><a href="#__codelineno-36-5">5</a></span>
<span class="normal"><a href="#__codelineno-36-6">6</a></span>
<span class="normal"><a href="#__codelineno-36-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-36-2" name="__codelineno-36-2"></a>
<a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-36-4" name="__codelineno-36-4"></a>
<a id="__codelineno-36-5" name="__codelineno-36-5"></a>
<a id="__codelineno-36-6" name="__codelineno-36-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-36-7" name="__codelineno-36-7"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">(</span><span class="n">Task</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="function-references">Function references<a class="headerlink" href="#function-references" title="Permanent link">ðŸ”—</a></h3>
<p>Functions (or methods) can also be used to create <code>Inputs</code>.
This can be done by decorating a method with the <code>Input</code> class.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1">1</a></span>
<span class="normal"><a href="#__codelineno-37-2">2</a></span>
<span class="normal"><a href="#__codelineno-37-3">3</a></span>
<span class="normal"><a href="#__codelineno-37-4">4</a></span>
<span class="normal"><a href="#__codelineno-37-5">5</a></span>
<span class="normal"><a href="#__codelineno-37-6">6</a></span>
<span class="normal"><a href="#__codelineno-37-7">7</a></span>
<span class="normal"><a href="#__codelineno-37-8">8</a></span>
<span class="normal"><a href="#__codelineno-37-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-37-2" name="__codelineno-37-2"></a>
<a id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-37-4" name="__codelineno-37-4"></a>
<a id="__codelineno-37-5" name="__codelineno-37-5"></a>
<a id="__codelineno-37-6" name="__codelineno-37-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-37-7" name="__codelineno-37-7"></a>    <span class="nd">@Input</span>
<a id="__codelineno-37-8" name="__codelineno-37-8"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-37-9" name="__codelineno-37-9"></a>        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<details>
<summary>About method signature</summary>
<p>The decorated method is treated as a static method by the <code>Input</code>.</p>
<p>The <code>self</code> argument is not an instance of the <code>MutationType</code>,
but the <strong><em>Model instance</em></strong> that is being mutated.</p>
<p>The <code>info</code> argument can be left out, but if it's included, it should always
have the <code>GQLInfo</code> type annotation.</p>
</details>
<p>The <code>value</code> argument determines the input given by the user, which can then be transformed
into the input data for the mutation in the function. The type of the <code>value</code> argument
determines the input type of the function input in. The <code>value</code> argument can also be left out,
in which case the input will become a <a href="#hidden-inputs"><code>hidden</code></a> input.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1">1</a></span>
<span class="normal"><a href="#__codelineno-38-2">2</a></span>
<span class="normal"><a href="#__codelineno-38-3">3</a></span>
<span class="normal"><a href="#__codelineno-38-4">4</a></span>
<span class="normal"><a href="#__codelineno-38-5">5</a></span>
<span class="normal"><a href="#__codelineno-38-6">6</a></span>
<span class="normal"><a href="#__codelineno-38-7">7</a></span>
<span class="normal"><a href="#__codelineno-38-8">8</a></span>
<span class="normal"><a href="#__codelineno-38-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-38-2" name="__codelineno-38-2"></a>
<a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-38-4" name="__codelineno-38-4"></a>
<a id="__codelineno-38-5" name="__codelineno-38-5"></a>
<a id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-38-7" name="__codelineno-38-7"></a>    <span class="nd">@Input</span>
<a id="__codelineno-38-8" name="__codelineno-38-8"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">current_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">GQLInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-38-9" name="__codelineno-38-9"></a>        <span class="k">return</span> <span class="n">info</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span>
</code></pre></div></td></tr></table></div>
<h3 id="model-references">Model references<a class="headerlink" href="#model-references" title="Permanent link">ðŸ”—</a></h3>
<p>A Model class can also be used as an <code>Input</code> reference.
In this case, a Model instance will be fetched to the input data from a primary key
provided to the <code>Input</code> before permission and validation checks (see <a href="#order-of-operations">order of operation</a>).
If an instance is not found, the <code>Input</code> will raise an error before any other checks are run.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1">1</a></span>
<span class="normal"><a href="#__codelineno-39-2">2</a></span>
<span class="normal"><a href="#__codelineno-39-3">3</a></span>
<span class="normal"><a href="#__codelineno-39-4">4</a></span>
<span class="normal"><a href="#__codelineno-39-5">5</a></span>
<span class="normal"><a href="#__codelineno-39-6">6</a></span>
<span class="normal"><a href="#__codelineno-39-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-39-2" name="__codelineno-39-2"></a>
<a id="__codelineno-39-3" name="__codelineno-39-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Project</span><span class="p">,</span> <span class="n">Task</span>
<a id="__codelineno-39-4" name="__codelineno-39-4"></a>
<a id="__codelineno-39-5" name="__codelineno-39-5"></a>
<a id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-39-7" name="__codelineno-39-7"></a>    <span class="n">project</span> <span class="o">=</span> <span class="n">Input</span><span class="p">(</span><span class="n">Project</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>The Model doesn't necessarily need to be a related Model of the parent <code>MutationType</code> Model,
but if it is not, the input will be an <a href="#input-only-inputs">input-only</a> input by default.</p>
<h3 id="permissions_1">Permissions<a class="headerlink" href="#permissions_1" title="Permanent link">ðŸ”—</a></h3>
<p>You can restrict the use of an <code>Input</code> by first defining the <code>Input</code> in the class body
of the <code>MutationType</code> and then adding a method with the <code>@&lt;input_name&gt;.permissions</code> decorator.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-40-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-40-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-40-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-40-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-40-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-40-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-40-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-40-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-40-10">10</a></span>
<span class="normal"><a href="#__codelineno-40-11">11</a></span>
<span class="normal"><a href="#__codelineno-40-12">12</a></span>
<span class="normal"><a href="#__codelineno-40-13">13</a></span>
<span class="normal"><a href="#__codelineno-40-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">GraphQLPermissionError</span>
<a id="__codelineno-40-3" name="__codelineno-40-3"></a>
<a id="__codelineno-40-4" name="__codelineno-40-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-40-5" name="__codelineno-40-5"></a>
<a id="__codelineno-40-6" name="__codelineno-40-6"></a>
<a id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-40-8" name="__codelineno-40-8"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-40-9" name="__codelineno-40-9"></a>
<a id="__codelineno-40-10" name="__codelineno-40-10"></a>    <span class="nd">@name</span><span class="o">.</span><span class="n">permissions</span>
<a id="__codelineno-40-11" name="__codelineno-40-11"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name_permissions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-40-12" name="__codelineno-40-12"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">:</span>
<a id="__codelineno-40-13" name="__codelineno-40-13"></a>            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"Only authenticated users can set task names."</span>
<a id="__codelineno-40-14" name="__codelineno-40-14"></a>            <span class="k">raise</span> <span class="n">GraphQLPermissionError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<details>
<summary>About method signature</summary>
<p>The decorated method is treated as a static method by the <code>Input</code>.</p>
<p>The <code>self</code> argument is not an instance of the <code>MutationType</code>,
but the <strong><em>model instance</em></strong> that is being mutated.</p>
<p>The <code>info</code> argument is the GraphQL resolve info for the request.</p>
<p>The <code>value</code> argument is the value provided for the input.</p>
</details>
<p>You can raise any <code>GraphQLError</code> when validation fails, but it's recommended to
raise a <code>GraphQLPermissionError</code> from the <code>undine.exceptions</code> module.</p>
<h3 id="validation_1">Validation<a class="headerlink" href="#validation_1" title="Permanent link">ðŸ”—</a></h3>
<p>You can validate the value of an <code>Input</code> by first defining the <code>Input</code> in the class body
of the <code>MutationType</code> and then adding a method with the <code>@&lt;input_name&gt;.validate</code> decorator.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-41-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-41-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-41-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-41-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-41-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-41-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-41-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-41-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-41-10">10</a></span>
<span class="normal"><a href="#__codelineno-41-11">11</a></span>
<span class="normal"><a href="#__codelineno-41-12">12</a></span>
<span class="normal"><a href="#__codelineno-41-13">13</a></span>
<span class="normal"><a href="#__codelineno-41-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">GraphQLValidationError</span>
<a id="__codelineno-41-3" name="__codelineno-41-3"></a>
<a id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-41-5" name="__codelineno-41-5"></a>
<a id="__codelineno-41-6" name="__codelineno-41-6"></a>
<a id="__codelineno-41-7" name="__codelineno-41-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-41-8" name="__codelineno-41-8"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-41-9" name="__codelineno-41-9"></a>
<a id="__codelineno-41-10" name="__codelineno-41-10"></a>    <span class="nd">@name</span><span class="o">.</span><span class="n">validate</span>
<a id="__codelineno-41-11" name="__codelineno-41-11"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">validate_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-41-12" name="__codelineno-41-12"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
<a id="__codelineno-41-13" name="__codelineno-41-13"></a>            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"Name must be at least 3 characters long."</span>
<a id="__codelineno-41-14" name="__codelineno-41-14"></a>            <span class="k">raise</span> <span class="n">GraphQLValidationError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<details>
<summary>About method signature</summary>
<p>The <code>self</code> argument is not an instance of the <code>MutationType</code>,
but the <strong><em>model instance</em></strong> that is being mutated.</p>
<p>The <code>info</code> argument is the GraphQL resolve info for the request.</p>
<p>The <code>value</code> argument is the value provided for the input.</p>
</details>
<p>You can raise any <code>GraphQLError</code> when validation fails, but it's recommended to
raise a <code>GraphQLValidationError</code> from the <code>undine.exceptions</code> module.</p>
<h3 id="conversion">Conversion<a class="headerlink" href="#conversion" title="Permanent link">ðŸ”—</a></h3>
<p>Normally, values for <code>Inputs</code> are parsed and converted based on the <code>Input's</code> <a href="../scalars/"><code>Scalar</code></a>.
However, you can add additional convertion for an individual <code>Input</code> by first defining
the <code>Input</code> in the class body of the <code>MutationType</code> and then adding a method with
the <code>@&lt;input_name&gt;.convert</code> decorator.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-42-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-42-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-42-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-42-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-42-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-42-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-42-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-42-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-42-10">10</a></span>
<span class="normal"><a href="#__codelineno-42-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-42-2" name="__codelineno-42-2"></a>
<a id="__codelineno-42-3" name="__codelineno-42-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-42-4" name="__codelineno-42-4"></a>
<a id="__codelineno-42-5" name="__codelineno-42-5"></a>
<a id="__codelineno-42-6" name="__codelineno-42-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-42-7" name="__codelineno-42-7"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-42-8" name="__codelineno-42-8"></a>
<a id="__codelineno-42-9" name="__codelineno-42-9"></a>    <span class="nd">@name</span><span class="o">.</span><span class="n">convert</span>
<a id="__codelineno-42-10" name="__codelineno-42-10"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">convert_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-42-11" name="__codelineno-42-11"></a>        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<details>
<summary>About method signature</summary>
<p>The <code>self</code> argument is not an instance of the <code>MutationType</code>,
but the <code>Input</code> whose value is being converted.</p>
<p>The <code>value</code> argument is the value provided for the <code>Input</code>.</p>
</details>
<p>Note that conversion functions are also run for <a href="#default-values">default values</a>.</p>
<h3 id="default-values">Default values<a class="headerlink" href="#default-values" title="Permanent link">ðŸ”—</a></h3>
<p>By default, an <code>Input</code> is able to determine its default value based on its reference.
For example, for a <a href="#model-field-references">Model field</a>, the default value is taken
from its <code>default</code> attribute. However, default values are only added automatically for
create mutations, as update mutations should only update fields that have been provided.</p>
<p>If you want to set the default value for an <code>Input</code> manually, you can set
the <code>default_value</code> argument on the <code>Input</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-43-1">1</a></span>
<span class="normal"><a href="#__codelineno-43-2">2</a></span>
<span class="normal"><a href="#__codelineno-43-3">3</a></span>
<span class="normal"><a href="#__codelineno-43-4">4</a></span>
<span class="normal"><a href="#__codelineno-43-5">5</a></span>
<span class="normal"><a href="#__codelineno-43-6">6</a></span>
<span class="normal"><a href="#__codelineno-43-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-43-2" name="__codelineno-43-2"></a>
<a id="__codelineno-43-3" name="__codelineno-43-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-43-4" name="__codelineno-43-4"></a>
<a id="__codelineno-43-5" name="__codelineno-43-5"></a>
<a id="__codelineno-43-6" name="__codelineno-43-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-43-7" name="__codelineno-43-7"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">(</span><span class="n">default_value</span><span class="o">=</span><span class="s2">"New task"</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Note that the default value needs to be a valid GraphQL default value,
i.e., a string, integer, float, boolean, or null, or a list or dictionary of these.</p>
<blockquote>
<p>Note that you, indeed, can use lists and dictionaries as default values, even though they
are mutable. Undine will make a copy of any non-hashable default value before
mutating it, so that you won't accidentally change the default value.</p>
</blockquote>
<h3 id="input-only-inputs">Input-only inputs<a class="headerlink" href="#input-only-inputs" title="Permanent link">ðŸ”—</a></h3>
<p>Input-only <code>Inputs</code> show up in the GraphQL schema, but their values are removed from the mutation data
before the actual mutation (see <a href="#order-of-operations">order of operations</a>),
usually because they are not part of the Model being mutated. They can be used as additional data for
validation and permissions checks, e.g. flags to control the behavior of the mutation.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-44-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-44-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-44-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-44-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-44-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-44-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-44-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-44-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-44-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-44-10">10</a></span>
<span class="normal"><a href="#__codelineno-44-11">11</a></span>
<span class="normal"><a href="#__codelineno-44-12">12</a></span>
<span class="normal"><a href="#__codelineno-44-13">13</a></span>
<span class="normal"><a href="#__codelineno-44-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>
<a id="__codelineno-44-2" name="__codelineno-44-2"></a>
<a id="__codelineno-44-3" name="__codelineno-44-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-44-4" name="__codelineno-44-4"></a>
<a id="__codelineno-44-5" name="__codelineno-44-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-44-6" name="__codelineno-44-6"></a>
<a id="__codelineno-44-7" name="__codelineno-44-7"></a>
<a id="__codelineno-44-8" name="__codelineno-44-8"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-44-9" name="__codelineno-44-9"></a>    <span class="n">logging_enabled</span> <span class="o">=</span> <span class="n">Input</span><span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="n">input_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-44-10" name="__codelineno-44-10"></a>
<a id="__codelineno-44-11" name="__codelineno-44-11"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-44-12" name="__codelineno-44-12"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__validate__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Task</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">input_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-44-13" name="__codelineno-44-13"></a>        <span class="k">if</span> <span class="n">input_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"logging_enabled"</span><span class="p">):</span>
<a id="__codelineno-44-14" name="__codelineno-44-14"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">"Logging enabled"</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Notice that the <code>Input</code> reference is <code>bool</code>. This is to indicate the input type,
as there is no Model field to infer the type from.</p>
<h3 id="hidden-inputs">Hidden inputs<a class="headerlink" href="#hidden-inputs" title="Permanent link">ðŸ”—</a></h3>
<p>Hidden <code>Inputs</code> are not included in the GraphQL schema, but their values are added before
the mutation is executed (see <a href="#order-of-operations">order of operations</a>).
They can be used, for example, to set default values for fields that should not be overridden by users.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-45-1">1</a></span>
<span class="normal"><a href="#__codelineno-45-2">2</a></span>
<span class="normal"><a href="#__codelineno-45-3">3</a></span>
<span class="normal"><a href="#__codelineno-45-4">4</a></span>
<span class="normal"><a href="#__codelineno-45-5">5</a></span>
<span class="normal"><a href="#__codelineno-45-6">6</a></span>
<span class="normal"><a href="#__codelineno-45-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-45-2" name="__codelineno-45-2"></a>
<a id="__codelineno-45-3" name="__codelineno-45-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-45-4" name="__codelineno-45-4"></a>
<a id="__codelineno-45-5" name="__codelineno-45-5"></a>
<a id="__codelineno-45-6" name="__codelineno-45-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-45-7" name="__codelineno-45-7"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">(</span><span class="n">hidden</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="s2">"New task"</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>One common use case for hidden inputs is to set the current user
as the default value for a relational field. Let's suppose that
the <code>Task</code> model has a foreign key <code>user</code> to the <code>User</code> Model.
To assign a new task to the current user during creation,
you can define a hidden input for the <code>user</code> field:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-46-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-46-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-46-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-46-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-46-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-46-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-46-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-46-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-46-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-46-10">10</a></span>
<span class="normal"><a href="#__codelineno-46-11">11</a></span>
<span class="normal"><a href="#__codelineno-46-12">12</a></span>
<span class="normal"><a href="#__codelineno-46-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.auth.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>
<a id="__codelineno-46-2" name="__codelineno-46-2"></a>
<a id="__codelineno-46-3" name="__codelineno-46-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-46-4" name="__codelineno-46-4"></a>
<a id="__codelineno-46-5" name="__codelineno-46-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-46-6" name="__codelineno-46-6"></a>
<a id="__codelineno-46-7" name="__codelineno-46-7"></a>
<a id="__codelineno-46-8" name="__codelineno-46-8"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-46-9" name="__codelineno-46-9"></a>    <span class="nd">@Input</span>
<a id="__codelineno-46-10" name="__codelineno-46-10"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">GQLInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">User</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-46-11" name="__codelineno-46-11"></a>        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_anonymous</span><span class="p">:</span>
<a id="__codelineno-46-12" name="__codelineno-46-12"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-46-13" name="__codelineno-46-13"></a>        <span class="k">return</span> <span class="n">info</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">user</span>
</code></pre></div></td></tr></table></div>
<p>See <a href="#function-references">Function References</a> for more details.</p>
<h3 id="required-inputs">Required inputs<a class="headerlink" href="#required-inputs" title="Permanent link">ðŸ”—</a></h3>
<p>By default, an <code>Input</code> is able to determine whether it's required or not based on
its reference, as well as the <code>kind</code> of <code>MutationType</code> it's used in. If you want to
set this manually, you can set the <code>required</code> argument on the <code>Input</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-47-1">1</a></span>
<span class="normal"><a href="#__codelineno-47-2">2</a></span>
<span class="normal"><a href="#__codelineno-47-3">3</a></span>
<span class="normal"><a href="#__codelineno-47-4">4</a></span>
<span class="normal"><a href="#__codelineno-47-5">5</a></span>
<span class="normal"><a href="#__codelineno-47-6">6</a></span>
<span class="normal"><a href="#__codelineno-47-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-47-2" name="__codelineno-47-2"></a>
<a id="__codelineno-47-3" name="__codelineno-47-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-47-4" name="__codelineno-47-4"></a>
<a id="__codelineno-47-5" name="__codelineno-47-5"></a>
<a id="__codelineno-47-6" name="__codelineno-47-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-47-7" name="__codelineno-47-7"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<p>Note that due to GraphQL implementation details, there is no distinction between
<em>required</em> and <em>nullable</em>. Therefore, non-required <code>Inputs</code> can always accept <code>null</code> values,
and required inputs cannot accept <code>null</code> values.</p>
</blockquote>
<h3 id="field-name">Field name<a class="headerlink" href="#field-name" title="Permanent link">ðŸ”—</a></h3>
<p>A <code>field_name</code> can be provided to explicitly set the Django Model field
that the <code>Input</code> corresponds to.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-48-1">1</a></span>
<span class="normal"><a href="#__codelineno-48-2">2</a></span>
<span class="normal"><a href="#__codelineno-48-3">3</a></span>
<span class="normal"><a href="#__codelineno-48-4">4</a></span>
<span class="normal"><a href="#__codelineno-48-5">5</a></span>
<span class="normal"><a href="#__codelineno-48-6">6</a></span>
<span class="normal"><a href="#__codelineno-48-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-48-2" name="__codelineno-48-2"></a>
<a id="__codelineno-48-3" name="__codelineno-48-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-48-4" name="__codelineno-48-4"></a>
<a id="__codelineno-48-5" name="__codelineno-48-5"></a>
<a id="__codelineno-48-6" name="__codelineno-48-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-48-7" name="__codelineno-48-7"></a>    <span class="n">title</span> <span class="o">=</span> <span class="n">Input</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="s2">"name"</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>This can be useful when the <code>Input</code> has a different name and type in the GraphQL schema than in the Model.</p>
<h3 id="schema-name_1">Schema name<a class="headerlink" href="#schema-name_1" title="Permanent link">ðŸ”—</a></h3>
<p>By default, the name of the <code>InputObjectType</code> field generated from an <code>Input</code> is the same
as the name of the <code>Input</code> on the <code>MutationType</code> class (converted to <em>camelCase</em> if
<a href="../settings/#camel_case_schema_fields"><code>CAMEL_CASE_SCHEMA_FIELDS</code></a> is enabled).
If you want to change the name of the <code>InputObjectType</code> field separately,
you can do so by setting the <code>schema_name</code> argument:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-49-1">1</a></span>
<span class="normal"><a href="#__codelineno-49-2">2</a></span>
<span class="normal"><a href="#__codelineno-49-3">3</a></span>
<span class="normal"><a href="#__codelineno-49-4">4</a></span>
<span class="normal"><a href="#__codelineno-49-5">5</a></span>
<span class="normal"><a href="#__codelineno-49-6">6</a></span>
<span class="normal"><a href="#__codelineno-49-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-49-2" name="__codelineno-49-2"></a>
<a id="__codelineno-49-3" name="__codelineno-49-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-49-4" name="__codelineno-49-4"></a>
<a id="__codelineno-49-5" name="__codelineno-49-5"></a>
<a id="__codelineno-49-6" name="__codelineno-49-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-49-7" name="__codelineno-49-7"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">(</span><span class="n">schema_name</span><span class="o">=</span><span class="s2">"title"</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>This can be useful when the desired name of the <code>InputObjectType</code> field is a Python keyword
and cannot be used as the <code>Input</code> attribute name.</p>
<h3 id="descriptions">Descriptions<a class="headerlink" href="#descriptions" title="Permanent link">ðŸ”—</a></h3>
<p>By default, an <code>Input</code> is able to determine its description based on its reference.
For example, for a <a href="#model-field-references">Model field</a>, the description is taken from its <code>help_text</code>.
If the reference has no description, or you wish to add a different one,
this can be done in two ways:</p>
<p>1) By setting the <code>description</code> argument.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-50-1">1</a></span>
<span class="normal"><a href="#__codelineno-50-2">2</a></span>
<span class="normal"><a href="#__codelineno-50-3">3</a></span>
<span class="normal"><a href="#__codelineno-50-4">4</a></span>
<span class="normal"><a href="#__codelineno-50-5">5</a></span>
<span class="normal"><a href="#__codelineno-50-6">6</a></span>
<span class="normal"><a href="#__codelineno-50-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-50-2" name="__codelineno-50-2"></a>
<a id="__codelineno-50-3" name="__codelineno-50-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-50-4" name="__codelineno-50-4"></a>
<a id="__codelineno-50-5" name="__codelineno-50-5"></a>
<a id="__codelineno-50-6" name="__codelineno-50-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-50-7" name="__codelineno-50-7"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">"The name of the task."</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>2) As class attribute docstrings, if <a href="../settings/#enable_class_attribute_docstrings"><code>ENABLE_CLASS_ATTRIBUTE_DOCSTRINGS</code></a> is enabled.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-51-1">1</a></span>
<span class="normal"><a href="#__codelineno-51-2">2</a></span>
<span class="normal"><a href="#__codelineno-51-3">3</a></span>
<span class="normal"><a href="#__codelineno-51-4">4</a></span>
<span class="normal"><a href="#__codelineno-51-5">5</a></span>
<span class="normal"><a href="#__codelineno-51-6">6</a></span>
<span class="normal"><a href="#__codelineno-51-7">7</a></span>
<span class="normal"><a href="#__codelineno-51-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-51-2" name="__codelineno-51-2"></a>
<a id="__codelineno-51-3" name="__codelineno-51-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-51-4" name="__codelineno-51-4"></a>
<a id="__codelineno-51-5" name="__codelineno-51-5"></a>
<a id="__codelineno-51-6" name="__codelineno-51-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-51-7" name="__codelineno-51-7"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-51-8" name="__codelineno-51-8"></a><span class="w">    </span><span class="sd">"""The name of the task."""</span>
</code></pre></div></td></tr></table></div>
<p>When using <a href="#function-references">function references</a>, instead of a class attribute docstring,
you add a docstring to the function/method used as the reference instead.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-52-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-52-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-52-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-52-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-52-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-52-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-52-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-52-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-52-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-52-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-52-2" name="__codelineno-52-2"></a>
<a id="__codelineno-52-3" name="__codelineno-52-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-52-4" name="__codelineno-52-4"></a>
<a id="__codelineno-52-5" name="__codelineno-52-5"></a>
<a id="__codelineno-52-6" name="__codelineno-52-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-52-7" name="__codelineno-52-7"></a>    <span class="nd">@Input</span>
<a id="__codelineno-52-8" name="__codelineno-52-8"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">GQLInfo</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-52-9" name="__codelineno-52-9"></a><span class="w">        </span><span class="sd">"""Name of the task."""</span>
<a id="__codelineno-52-10" name="__codelineno-52-10"></a>        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h3 id="deprecation-reason">Deprecation reason<a class="headerlink" href="#deprecation-reason" title="Permanent link">ðŸ”—</a></h3>
<p>A <code>deprecation_reason</code> can be provided to mark the <code>Input</code> as deprecated.
This is for documentation purposes only, and does not affect the use of the <code>Field</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-53-1">1</a></span>
<span class="normal"><a href="#__codelineno-53-2">2</a></span>
<span class="normal"><a href="#__codelineno-53-3">3</a></span>
<span class="normal"><a href="#__codelineno-53-4">4</a></span>
<span class="normal"><a href="#__codelineno-53-5">5</a></span>
<span class="normal"><a href="#__codelineno-53-6">6</a></span>
<span class="normal"><a href="#__codelineno-53-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-53-2" name="__codelineno-53-2"></a>
<a id="__codelineno-53-3" name="__codelineno-53-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-53-4" name="__codelineno-53-4"></a>
<a id="__codelineno-53-5" name="__codelineno-53-5"></a>
<a id="__codelineno-53-6" name="__codelineno-53-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-53-7" name="__codelineno-53-7"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">(</span><span class="n">deprecation_reason</span><span class="o">=</span><span class="s2">"Use something else."</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="directives_1">Directives<a class="headerlink" href="#directives_1" title="Permanent link">ðŸ”—</a></h3>
<p>You can add directives to the <code>Input</code> by providing them using the <code>directives</code> argument.
The directive must be usable in the <code>INPUT_FIELD_DEFINITION</code> location.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-54-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-54-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-54-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-54-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-54-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-54-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-54-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-54-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-54-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-54-10">10</a></span>
<span class="normal"><a href="#__codelineno-54-11">11</a></span>
<span class="normal"><a href="#__codelineno-54-12">12</a></span>
<span class="normal"><a href="#__codelineno-54-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">graphql</span><span class="w"> </span><span class="kn">import</span> <span class="n">DirectiveLocation</span>
<a id="__codelineno-54-2" name="__codelineno-54-2"></a>
<a id="__codelineno-54-3" name="__codelineno-54-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-54-4" name="__codelineno-54-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine.directives</span><span class="w"> </span><span class="kn">import</span> <span class="n">Directive</span>
<a id="__codelineno-54-5" name="__codelineno-54-5"></a>
<a id="__codelineno-54-6" name="__codelineno-54-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-54-7" name="__codelineno-54-7"></a>
<a id="__codelineno-54-8" name="__codelineno-54-8"></a>
<a id="__codelineno-54-9" name="__codelineno-54-9"></a><span class="k">class</span><span class="w"> </span><span class="nc">MyDirective</span><span class="p">(</span><span class="n">Directive</span><span class="p">,</span> <span class="n">locations</span><span class="o">=</span><span class="p">[</span><span class="n">DirectiveLocation</span><span class="o">.</span><span class="n">INPUT_FIELD_DEFINITION</span><span class="p">]):</span> <span class="o">...</span>
<a id="__codelineno-54-10" name="__codelineno-54-10"></a>
<a id="__codelineno-54-11" name="__codelineno-54-11"></a>
<a id="__codelineno-54-12" name="__codelineno-54-12"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-54-13" name="__codelineno-54-13"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">(</span><span class="n">directives</span><span class="o">=</span><span class="p">[</span><span class="n">MyDirective</span><span class="p">()])</span>
</code></pre></div></td></tr></table></div>
<p>You can also add them using the <code>@</code> operator (which kind of looks like GraphQL syntax):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-55-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-55-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-55-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-55-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-55-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-55-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-55-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-55-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-55-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-55-10">10</a></span>
<span class="normal"><a href="#__codelineno-55-11">11</a></span>
<span class="normal"><a href="#__codelineno-55-12">12</a></span>
<span class="normal"><a href="#__codelineno-55-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">graphql</span><span class="w"> </span><span class="kn">import</span> <span class="n">DirectiveLocation</span>
<a id="__codelineno-55-2" name="__codelineno-55-2"></a>
<a id="__codelineno-55-3" name="__codelineno-55-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-55-4" name="__codelineno-55-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine.directives</span><span class="w"> </span><span class="kn">import</span> <span class="n">Directive</span>
<a id="__codelineno-55-5" name="__codelineno-55-5"></a>
<a id="__codelineno-55-6" name="__codelineno-55-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-55-7" name="__codelineno-55-7"></a>
<a id="__codelineno-55-8" name="__codelineno-55-8"></a>
<a id="__codelineno-55-9" name="__codelineno-55-9"></a><span class="k">class</span><span class="w"> </span><span class="nc">MyDirective</span><span class="p">(</span><span class="n">Directive</span><span class="p">,</span> <span class="n">locations</span><span class="o">=</span><span class="p">[</span><span class="n">DirectiveLocation</span><span class="o">.</span><span class="n">INPUT_FIELD_DEFINITION</span><span class="p">]):</span> <span class="o">...</span>
<a id="__codelineno-55-10" name="__codelineno-55-10"></a>
<a id="__codelineno-55-11" name="__codelineno-55-11"></a>
<a id="__codelineno-55-12" name="__codelineno-55-12"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-55-13" name="__codelineno-55-13"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span> <span class="o">@</span> <span class="n">MyDirective</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>See the <a href="../directives/">Directives</a> section for more details on directives.</p>
<h3 id="visibility_1">Visibility<a class="headerlink" href="#visibility_1" title="Permanent link">ðŸ”—</a></h3>
<blockquote>
<p>This is an experimental feature that needs to be enabled using the
<a href="../settings/#experimental_visibility_checks"><code>EXPERIMENTAL_VISIBILITY_CHECKS</code></a> setting.</p>
</blockquote>
<p>You can hide an <code>Input</code> from certain users by decorating a method with the
<code>&lt;input_name&gt;.visible</code> decorator. Hiding an <code>Input</code> means that it will not be included in introspection queries,
and trying to use it in operations will result in an error that looks exactly like
the <code>Input</code> didn't exist in the first place.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-56-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-56-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-56-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-56-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-56-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-56-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-56-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-56-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-56-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-56-10">10</a></span>
<span class="normal"><a href="#__codelineno-56-11">11</a></span>
<span class="normal"><a href="#__codelineno-56-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-56-2" name="__codelineno-56-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine.typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">DjangoRequestProtocol</span>
<a id="__codelineno-56-3" name="__codelineno-56-3"></a>
<a id="__codelineno-56-4" name="__codelineno-56-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-56-5" name="__codelineno-56-5"></a>
<a id="__codelineno-56-6" name="__codelineno-56-6"></a>
<a id="__codelineno-56-7" name="__codelineno-56-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-56-8" name="__codelineno-56-8"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">()</span>
<a id="__codelineno-56-9" name="__codelineno-56-9"></a>
<a id="__codelineno-56-10" name="__codelineno-56-10"></a>    <span class="nd">@name</span><span class="o">.</span><span class="n">visible</span>
<a id="__codelineno-56-11" name="__codelineno-56-11"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name_visible</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">DjangoRequestProtocol</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-56-12" name="__codelineno-56-12"></a>        <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span>
</code></pre></div></td></tr></table></div>
<details>
<summary>About method signature</summary>
<p>The decorated method is treated as a static method by the <code>Input</code>.</p>
<p>The <code>self</code> argument is not an instance of the <code>MutationType</code>,
but the instance of the <code>Input</code> that is being used.</p>
<p>Since visibility checks occur in the validation phase of the GraphQL request,
GraphQL resolver info is not yet available. However, you can access the
Django request object using the <code>request</code> argument.
From this, you can, e.g., access the request user for permission checks.</p>
</details>
<blockquote>
<p>When using visibility checks, you should also disable "did you mean" suggestions
using the <a href="../settings/#allow_did_you_mean_suggestions"><code>ALLOW_DID_YOU_MEAN_SUGGESTIONS</code></a> setting.
Otherwise, a hidden field might show up in them.</p>
</blockquote>
<h3 id="graphql-extensions_1">GraphQL extensions<a class="headerlink" href="#graphql-extensions_1" title="Permanent link">ðŸ”—</a></h3>
<p>You can provide custom extensions for the <code>Input</code> by providing a
<code>extensions</code> argument with a dictionary containing them. These can then be used
however you wish to extend the functionality of the <code>Input</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-57-1">1</a></span>
<span class="normal"><a href="#__codelineno-57-2">2</a></span>
<span class="normal"><a href="#__codelineno-57-3">3</a></span>
<span class="normal"><a href="#__codelineno-57-4">4</a></span>
<span class="normal"><a href="#__codelineno-57-5">5</a></span>
<span class="normal"><a href="#__codelineno-57-6">6</a></span>
<span class="normal"><a href="#__codelineno-57-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">MutationType</span>
<a id="__codelineno-57-2" name="__codelineno-57-2"></a>
<a id="__codelineno-57-3" name="__codelineno-57-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<a id="__codelineno-57-4" name="__codelineno-57-4"></a>
<a id="__codelineno-57-5" name="__codelineno-57-5"></a>
<a id="__codelineno-57-6" name="__codelineno-57-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<a id="__codelineno-57-7" name="__codelineno-57-7"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Input</span><span class="p">(</span><span class="n">extensions</span><span class="o">=</span><span class="p">{</span><span class="s2">"foo"</span><span class="p">:</span> <span class="s2">"bar"</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
<p><code>Input</code> extensions are made available in the GraphQL <code>InputObjectType</code> field extensions
after the schema is created. The <code>Input</code> itself is found in the GraphQL input field extensions
under a key defined by the <a href="../settings/#input_extensions_key"><code>INPUT_EXTENSIONS_KEY</code></a>
setting.</p>
<h2 id="atomic-mutations">Atomic mutations<a class="headerlink" href="#atomic-mutations" title="Permanent link">ðŸ”—</a></h2>
<p>If you want to execute multiple mutations in a single operation atomically,
you can use the <code>@atomic</code> directive on the mutation. Let's say you have the following schema:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-58-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-58-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-58-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-58-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-58-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-58-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-58-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-58-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-58-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-58-10">10</a></span>
<span class="normal"><a href="#__codelineno-58-11">11</a></span>
<span class="normal"><a href="#__codelineno-58-12">12</a></span>
<span class="normal"><a href="#__codelineno-58-13">13</a></span>
<span class="normal"><a href="#__codelineno-58-14">14</a></span>
<span class="normal"><a href="#__codelineno-58-15">15</a></span>
<span class="normal"><a href="#__codelineno-58-16">16</a></span>
<span class="normal"><a href="#__codelineno-58-17">17</a></span>
<span class="normal"><a href="#__codelineno-58-18">18</a></span>
<span class="normal"><a href="#__codelineno-58-19">19</a></span>
<span class="normal"><a href="#__codelineno-58-20">20</a></span>
<span class="normal"><a href="#__codelineno-58-21">21</a></span>
<span class="normal"><a href="#__codelineno-58-22">22</a></span>
<span class="normal"><a href="#__codelineno-58-23">23</a></span>
<span class="normal"><a href="#__codelineno-58-24">24</a></span>
<span class="normal"><a href="#__codelineno-58-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">undine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Entrypoint</span><span class="p">,</span> <span class="n">MutationType</span><span class="p">,</span> <span class="n">QueryType</span><span class="p">,</span> <span class="n">RootType</span>
<a id="__codelineno-58-2" name="__codelineno-58-2"></a>
<a id="__codelineno-58-3" name="__codelineno-58-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Project</span><span class="p">,</span> <span class="n">Task</span>
<a id="__codelineno-58-4" name="__codelineno-58-4"></a>
<a id="__codelineno-58-5" name="__codelineno-58-5"></a>
<a id="__codelineno-58-6" name="__codelineno-58-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskType</span><span class="p">(</span><span class="n">QueryType</span><span class="p">[</span><span class="n">Task</span><span class="p">],</span> <span class="n">auto</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-58-7" name="__codelineno-58-7"></a>
<a id="__codelineno-58-8" name="__codelineno-58-8"></a>
<a id="__codelineno-58-9" name="__codelineno-58-9"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Task</span><span class="p">],</span> <span class="n">auto</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-58-10" name="__codelineno-58-10"></a>
<a id="__codelineno-58-11" name="__codelineno-58-11"></a>
<a id="__codelineno-58-12" name="__codelineno-58-12"></a><span class="k">class</span><span class="w"> </span><span class="nc">ProjectType</span><span class="p">(</span><span class="n">QueryType</span><span class="p">[</span><span class="n">Project</span><span class="p">],</span> <span class="n">auto</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-58-13" name="__codelineno-58-13"></a>
<a id="__codelineno-58-14" name="__codelineno-58-14"></a>
<a id="__codelineno-58-15" name="__codelineno-58-15"></a><span class="k">class</span><span class="w"> </span><span class="nc">ProjectCreateMutation</span><span class="p">(</span><span class="n">MutationType</span><span class="p">[</span><span class="n">Project</span><span class="p">],</span> <span class="n">auto</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-58-16" name="__codelineno-58-16"></a>
<a id="__codelineno-58-17" name="__codelineno-58-17"></a>
<a id="__codelineno-58-18" name="__codelineno-58-18"></a><span class="k">class</span><span class="w"> </span><span class="nc">Query</span><span class="p">(</span><span class="n">RootType</span><span class="p">):</span>
<a id="__codelineno-58-19" name="__codelineno-58-19"></a>    <span class="n">tasks</span> <span class="o">=</span> <span class="n">Entrypoint</span><span class="p">(</span><span class="n">TaskType</span><span class="p">)</span>
<a id="__codelineno-58-20" name="__codelineno-58-20"></a>    <span class="n">projects</span> <span class="o">=</span> <span class="n">Entrypoint</span><span class="p">(</span><span class="n">ProjectType</span><span class="p">)</span>
<a id="__codelineno-58-21" name="__codelineno-58-21"></a>
<a id="__codelineno-58-22" name="__codelineno-58-22"></a>
<a id="__codelineno-58-23" name="__codelineno-58-23"></a><span class="k">class</span><span class="w"> </span><span class="nc">Mutation</span><span class="p">(</span><span class="n">RootType</span><span class="p">):</span>
<a id="__codelineno-58-24" name="__codelineno-58-24"></a>    <span class="n">create_task</span> <span class="o">=</span> <span class="n">Entrypoint</span><span class="p">(</span><span class="n">TaskCreateMutation</span><span class="p">)</span>
<a id="__codelineno-58-25" name="__codelineno-58-25"></a>    <span class="n">create_project</span> <span class="o">=</span> <span class="n">Entrypoint</span><span class="p">(</span><span class="n">ProjectCreateMutation</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>You can create both a <code>Task</code> and a <code>Project</code> atomically by adding the <code>@atomic</code> directive to the mutation:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-59-1">1</a></span>
<span class="normal"><a href="#__codelineno-59-2">2</a></span>
<span class="normal"><a href="#__codelineno-59-3">3</a></span>
<span class="normal"><a href="#__codelineno-59-4">4</a></span>
<span class="normal"><a href="#__codelineno-59-5">5</a></span>
<span class="normal"><a href="#__codelineno-59-6">6</a></span>
<span class="normal"><a href="#__codelineno-59-7">7</a></span>
<span class="normal"><a href="#__codelineno-59-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1"></a><span class="hll"><span class="k">mutation</span><span class="w"> </span><span class="p">(</span><span class="nv">$taskInput</span><span class="p">:</span><span class="w"> </span><span class="nc">TaskCreateMutation</span><span class="p">!</span><span class="w"> </span><span class="nv">$projectInput</span><span class="p">:</span><span class="w"> </span><span class="nc">ProjectCreateMutation</span><span class="p">!)</span><span class="w"> </span><span class="err">@</span><span class="nf">atomic</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-59-2" name="__codelineno-59-2"></a><span class="w">  </span><span class="n">createTask</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="nv">$taskInput</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-59-3" name="__codelineno-59-3"></a><span class="w">    </span><span class="n">pk</span>
<a id="__codelineno-59-4" name="__codelineno-59-4"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-59-5" name="__codelineno-59-5"></a><span class="w">  </span><span class="n">createProject</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="nv">$projectInput</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-59-6" name="__codelineno-59-6"></a><span class="w">    </span><span class="n">pk</span>
<a id="__codelineno-59-7" name="__codelineno-59-7"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-59-8" name="__codelineno-59-8"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now if any of the mutations fail, all created objects during the execution phase
of the mutation will be rolled back. Specifically, a rollback will be triggered
if any errors are thrown from top-level resolvers of a mutation operation.</p>
<blockquote>
<p>Note that atomic mutations are not supported when <a href="../async/">async mode</a> is enabled.</p>
</blockquote>
</div>
</div><footer>
<div aria-label="Footer Navigation" class="rst-footer-buttons" role="navigation">
<a class="btn btn-neutral float-left" href="../queries/" title="Queries"><span class="icon icon-circle-arrow-left"></span> Previous</a>
<a class="btn btn-neutral float-right" href="../filtering/" title="Filtering">Next <span class="icon icon-circle-arrow-right"></span></a>
</div>
<hr/>
<div role="contentinfo">
<!-- Copyright etc -->
</div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
</div>
</div>
</section>
</div>
<div aria-label="Versions" class="rst-versions" role="note">
<span class="rst-current-version" data-toggle="rst-current-version">
<span><a href="../queries/" style="color: #fcfcfc">Â« Previous</a></span>
<span><a href="../filtering/" style="color: #fcfcfc">Next Â»</a></span>
</span>
</div>
<script src="../js/jquery-3.6.0.min.js"></script>
<script>var base_url = "..";</script>
<script src="../js/theme_extra.js"></script>
<script src="../js/theme.js"></script>
<script src="../js/docs.js"></script>
<script src="../service-worker.js"></script>
<script src="../search/main.js"></script>
<script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>
</body>
</html>
